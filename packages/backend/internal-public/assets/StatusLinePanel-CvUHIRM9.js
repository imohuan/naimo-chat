import{n as e,t}from"./SaveOutlined-Dxj_WRmH.js";import{t as n}from"./CheckOutlined-DEphouVW.js";import{t as r}from"./ContentCopyOutlined-BSSisDIl.js";import{n as i,t as a}from"./EditOutlined-CZHFqlPU.js";import{n as o,t as s}from"./VisibilityOutlined-yaS2V4O_.js";import{$t as c,An as l,Dn as u,Fn as d,Gn as f,In as p,It as m,Jt as h,Kt as g,Qn as _,Qt as v,Rt as y,Ut as b,Vn as x,Vt as S,Xt as C,Yn as w,Yt as T,Zn as E,Zt as ee,bn as D,cn as te,dn as ne,en as O,gn as k,i as A,jn as re,ln as j,mn as ie,pn as ae,qn as M,qt as N,rn as oe,s as se,tn as ce,vn as P,w as le,yn as ue,zn as de,zt as F}from"./index-urHyhAmF.js";import{t as fe}from"./useLlmApi-e_L-gZNA.js";import{c as pe,m as me,p as he,r as ge,t as _e}from"./dist-DmajSpNV.js";import{u as ve}from"./floating-ui.vue-C1NloyW1.js";import{a as ye,c as be,d as xe,f as Se,i as Ce,l as we,m as Te,n as Ee,o as De,p as Oe,r as ke,s as Ae,t as je,u as Me}from"./dist-0CV_hbwk.js";import{t as Ne}from"./code-xml-Du14q2GW.js";import{t as Pe}from"./Input-DqR3mkMP.js";import{t as Fe}from"./Dropdown-ocMVVnLy.js";var Ie={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 24 24`},Le=O({name:`RestoreOutlined`,render:function(e,t){return k(),C(`svg`,Ie,t[0]||=[N(`path`,{d:`M13 3a9 9 0 0 0-9 9H1l4 3.99L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7s-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.25 2.52l.77-1.28l-3.52-2.09V8z`,fill:`currentColor`},null,-1)])}}),Re={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 24 24`},ze=O({name:`SegmentOutlined`,render:function(e,t){return k(),C(`svg`,Re,t[0]||=[N(`path`,{d:`M9 18h12v-2H9v2zM3 6v2h18V6H3zm6 7h12v-2H9v2z`,fill:`currentColor`},null,-1)])}}),Be={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 24 24`},Ve=O({name:`ToggleOffOutlined`,render:function(e,t){return k(),C(`svg`,Be,t[0]||=[N(`path`,{d:`M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3s3-1.34 3-3s-1.34-3-3-3z`,fill:`currentColor`},null,-1)])}}),He={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,viewBox:`0 0 24 24`},Ue=O({name:`ToggleOnOutlined`,render:function(e,t){return k(),C(`svg`,He,t[0]||=[N(`path`,{d:`M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zm0-7c-1.66 0-3 1.34-3 3s1.34 3 3 3s3-1.34 3-3s-1.34-3-3-3z`,fill:`currentColor`},null,-1)])}}),We=ve(`external-link`,[[`path`,{d:`M15 3h6v6`,key:`1q9fwt`}],[`path`,{d:`M10 14 21 3`,key:`gplh6r`}],[`path`,{d:`M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6`,key:`a6xqqp`}]]);function Ge(e,t={}){let{enableKeyboardShortcuts:n=!0,debounceMs:r=100,capacity:i=50,debug:a=!1}=t,o=(...e)=>{a&&console.log(`[usePreviewHistory]`,...e)},s=(...e)=>{a&&console.error(`[usePreviewHistory]`,...e)},c=x(JSON.stringify(e.value)),l=!1;o(`åˆå§‹åŒ–ï¼Œåˆå§‹å€¼:`,e.value),o(`åˆå§‹åºåˆ—åŒ–å€¼:`,c.value);let{history:d,undo:f,redo:p,canUndo:m,canRedo:h,clear:_,commit:v}=pe(c,{capacity:i,deep:!1,clone:e=>e,dump:e=>e,parse:e=>e}),y=()=>{if(d.value.length===0)return;let t=d.value[d.value.length-1]?.snapshot;if(!t)return;let n=JSON.stringify(e.value);if(n!==t){o(`syncFromHistory: åŒæ­¥åŽ†å²è®°å½•åˆ° sourceRef`),o(`syncFromHistory: å½“å‰å€¼:`,n),o(`syncFromHistory: åŽ†å²å€¼:`,t);try{let n=JSON.parse(t);l=!0,e.value=n,c.value!==t&&(c.value=t),setTimeout(()=>{l=!1},50)}catch(e){s(`syncFromHistory: è§£æžå¤±è´¥:`,e),l=!1}}},b=()=>{if(o(`undo() å¼€å§‹æ‰§è¡Œ`),o(`æ‰§è¡Œå‰çŠ¶æ€:`,{serializedValue:c.value,historyLength:d.value.length,canUndo:m.value,canRedo:h.value}),!m.value){o(`æ— æ³•æ’¤é”€ï¼ˆcanUndo ä¸º falseï¼‰`);return}f(),o(`undo() æ‰§è¡ŒåŽçŠ¶æ€:`,{serializedValue:c.value,historyLength:d.value.length,canUndo:m.value,canRedo:h.value}),setTimeout(()=>{y()},0)},S=()=>{if(o(`redo() å¼€å§‹æ‰§è¡Œ`),o(`æ‰§è¡Œå‰çŠ¶æ€:`,{serializedValue:c.value,historyLength:d.value.length,canUndo:m.value,canRedo:h.value}),!h.value){o(`æ— æ³•æ¢å¤ï¼ˆcanRedo ä¸º falseï¼‰`);return}p(),o(`redo() æ‰§è¡ŒåŽçŠ¶æ€:`,{serializedValue:c.value,historyLength:d.value.length,canUndo:m.value,canRedo:h.value}),setTimeout(()=>{y()},0)};u(d,e=>{o(`åŽ†å²è®°å½•å˜åŒ–ï¼Œé•¿åº¦:`,e.length),o(`canUndo:`,m.value,`canRedo:`,h.value),e.length>0&&o(`æœ€æ–°åŽ†å²è®°å½•:`,e[e.length-1])},{deep:!0}),u(m,e=>{o(`canUndo å˜åŒ–:`,e)}),u(h,e=>{o(`canRedo å˜åŒ–:`,e)}),ae(()=>{setTimeout(()=>{o(`onMounted: æäº¤åˆå§‹çŠ¶æ€`),v(),o(`æäº¤åŽåŽ†å²è®°å½•é•¿åº¦:`,d.value.length)},0)});let C=he(()=>{if(o(`debouncedUpdateSerialized è¢«è°ƒç”¨`),l){o(`è·³è¿‡æ›´æ–°ï¼ˆæ­£åœ¨ä»ŽåŽ†å²è®°å½•æ›´æ–°ï¼‰`);return}let t=JSON.stringify(e.value);o(`å‡†å¤‡æ›´æ–°åºåˆ—åŒ–å€¼:`,{oldValue:c.value,newValue:t,isEqual:c.value===t}),c.value===t?o(`è·³è¿‡æ›´æ–°ï¼ˆå€¼æœªæ”¹å˜ï¼‰`):(o(`æ›´æ–° serializedValue`),c.value=t)},r),w=()=>{if(o(`updateSerializedImmediately è¢«è°ƒç”¨`),l){o(`è·³è¿‡ç«‹å³æ›´æ–°ï¼ˆæ­£åœ¨ä»ŽåŽ†å²è®°å½•æ›´æ–°ï¼‰`);return}let t=JSON.stringify(e.value);c.value!==t&&(o(`ç«‹å³æ›´æ–° serializedValue:`,t),c.value=t)};u(e,(e,t)=>{if(o(`sourceRef å˜åŒ–:`,{newVal:e,oldVal:t,isUpdatingFromHistory:l}),l){o(`è·³è¿‡é˜²æŠ–æ›´æ–°ï¼ˆæ­£åœ¨ä»ŽåŽ†å²è®°å½•æ›´æ–°ï¼‰`);return}o(`è§¦å‘é˜²æŠ–æ›´æ–°`),C()},{deep:!0}),u(c,(t,n)=>{if(o(`serializedValue å˜åŒ–:`,{newValue:t,oldValue:n,isUpdatingFromHistory:l}),l){o(`è·³è¿‡åŒæ­¥ sourceRefï¼ˆæ­£åœ¨ä»ŽåŽ†å²è®°å½•æ›´æ–°ï¼‰`);return}try{let n=JSON.parse(t),r=JSON.stringify(e.value);o(`æ¯”è¾ƒåºåˆ—åŒ–å€¼:`,{currentSerialized:r,newValue:t,isEqual:r===t}),r===t?o(`è·³è¿‡æ›´æ–° sourceRefï¼ˆå€¼æœªæ”¹å˜ï¼‰`):(o(`æ›´æ–° sourceRef:`,n),l=!0,e.value=n,setTimeout(()=>{o(`é‡ç½® isUpdatingFromHistory æ ‡å¿—`),l=!1},50))}catch(e){s(`è§£æžå¤±è´¥:`,e),l=!1}},{immediate:!1});let T=e=>{let t=e.target;if(t.tagName===`INPUT`||t.tagName===`TEXTAREA`||t.isContentEditable||t.closest(`input`)||t.closest(`textarea`)||t.closest(`[contenteditable]`)){o(`é”®ç›˜äº‹ä»¶è¢«å¿½ç•¥ï¼ˆåœ¨å¯ç¼–è¾‘å…ƒç´ ä¸­ï¼‰:`,e.key);return}(e.ctrlKey||e.metaKey)&&e.key===`z`&&!e.shiftKey&&(o(`Ctrl+Z è¢«æŒ‰ä¸‹ï¼ŒcanUndo:`,m.value),e.preventDefault(),m.value?(o(`æ‰§è¡Œ undo()`),b(),o(`undo() æ‰§è¡ŒåŽï¼ŒserializedValue:`,c.value)):o(`æ— æ³•æ’¤é”€ï¼ˆcanUndo ä¸º falseï¼‰`)),(e.ctrlKey||e.metaKey)&&(e.key===`y`||e.key===`z`&&e.shiftKey)&&(o(`Ctrl+Y/Ctrl+Shift+Z è¢«æŒ‰ä¸‹ï¼ŒcanRedo:`,h.value),e.preventDefault(),h.value?(o(`æ‰§è¡Œ redo()`),S(),o(`redo() æ‰§è¡ŒåŽï¼ŒserializedValue:`,c.value)):o(`æ— æ³•æ¢å¤ï¼ˆcanRedo ä¸º falseï¼‰`))};ae(()=>{n&&document.addEventListener(`keydown`,T)}),ie(()=>{n&&document.removeEventListener(`keydown`,T)});function E(t){l=!0,e.value={...t},setTimeout(()=>{l=!1,w()},10)}return{previewHistory:g(()=>d.value.map(e=>{try{return JSON.parse(e.snapshot)}catch{return null}}).filter(e=>e!==null).slice(-10)),restoreFromHistory:E,canUndo:m,canRedo:h,undo:b,redo:S,clearHistory:_,commit:v}}const Ke=[{type:`workDir`,icon:`ðŸ“`,text:`{{workDirName}}`,color:`rgb(147, 197, 253)`},{type:`gitBranch`,icon:`ðŸŒ¿`,text:`{{gitBranch}}`,color:`rgb(74, 222, 128)`},{type:`model`,icon:`ðŸ¤–`,text:`{{model}}`,color:`rgb(253, 224, 71)`},{type:`usage`,icon:`ðŸ“Š`,text:`{{inputTokens}} â†’ {{outputTokens}}`,color:`rgb(244, 114, 182)`},{type:`progress`,icon:`ðŸ“ˆ`,text:``,color:`rgb(34, 211, 238)`,progressInput:`{{totalInputTokens}}`,progressOutput:`{{contextWindowSize}}`,progressLength:20,progressBgColor:`rgb(51, 65, 85)`,progressColor:`rgb(34, 211, 238)`,progressStyle:`block`},{type:`script`,icon:`ðŸ“œ`,text:`Script Module`,color:`rgb(34, 211, 238)`,scriptPath:``}];var qe={type:`usage`,text:`|`,color:`white`},Je=new Map(Ke.map(e=>[e.type,e]));const Ye=Ke[0];function Xe(){return{enabled:!1,currentStyle:`é»˜è®¤ä¸»é¢˜`,é»˜è®¤ä¸»é¢˜:{modules:Ke.slice(0,4)}}}function Ze(e,t){return e.replace(/\{\{(\w+)\}\}/g,(e,n)=>t[n]||e)}function Qe(e){return/^#[0-9A-F]{6}$/i.test(e)}function $e(e){if(e===`separator`)return{...qe};let t=Je.get(e);return t?{...t}:{...Ye,type:e}}function et(e){let{fetchConfig:t,saveConfig:n,updateStatusLine:r}=fe(),{pushToast:i}=le(),a=x(Xe()),o=x(null),[s,c]=me(!1),[l,d]=me(!0),f=x(!1),p=x(!1),m=x(null),h=g(()=>{let e=a.value.currentStyle,t=a.value[e];return t&&typeof t==`object`&&`modules`in t&&t.modules||[]}),_=g({get:()=>h.value,set:e=>{let t=a.value.currentStyle;a.value={...a.value,[t]:{modules:[...e]}}}}),v=g(()=>o.value===null||o.value>=h.value.length?null:h.value[o.value]??null);u(h,e=>{if(!e||e.length===0){o.value=null;return}(o.value===null||o.value>=e.length)&&(o.value=0)},{immediate:!0});function y(e,t){return JSON.stringify(e)===JSON.stringify(t)}function b(){m.value={statusLineConfig:JSON.parse(JSON.stringify(a.value)),autoSeparator:s.value,showIcon:l.value,previewVariables:JSON.parse(JSON.stringify(e.value))}}let S=g(()=>m.value?!y(a.value,m.value.statusLineConfig)||s.value!==m.value.autoSeparator||l.value!==m.value.showIcon||!y(e.value,m.value.previewVariables):!1);async function C(){try{f.value=!0;let n=await t();if(n.StatusLine){let t={...Xe(),...n.StatusLine};if(!t.currentStyle||!t[t.currentStyle]){let e=Object.keys(t).find(e=>e!==`enabled`&&e!==`currentStyle`&&typeof t[e]==`object`&&`modules`in t[e]);e&&(t.currentStyle=e)}a.value=t,n.StatusLine.previewVariables&&(e.value={...e.value,...n.StatusLine.previewVariables}),n.StatusLine.autoSeparator!==void 0&&c(n.StatusLine.autoSeparator),n.StatusLine.showIcon!==void 0&&d(n.StatusLine.showIcon)}b()}catch(e){i(`åŠ è½½é…ç½®å¤±è´¥: ${e.message}`,`error`)}finally{f.value=!1}}async function w(){try{p.value=!0,await n({...await t(),StatusLine:{...a.value,previewVariables:e.value,autoSeparator:s.value,showIcon:l.value}}),await r(),b(),i(`StatusLine é…ç½®å·²ä¿å­˜`,`success`)}catch(e){i(`ä¿å­˜é…ç½®å¤±è´¥: ${e.message}`,`error`)}finally{p.value=!1}}async function T(){await C(),i(`é…ç½®å·²åˆ·æ–°`,`success`)}function E(e){if(a.value.currentStyle===e)return;let t=e=>{let t=a.value[e];return t&&typeof t==`object`&&`modules`in t?t:null},n=a.value.currentStyle,r=t(n),i=r?[...r.modules||[]]:[],s=t(e);(s?[...s.modules||[]]:[]).length===0&&i.length>0?a.value={...a.value,[e]:{modules:[...i]},currentStyle:e}:a.value.currentStyle=e,o.value=null}function ee(e){let t=$e(e),n=a.value.currentStyle,r=a.value[n],i=r&&typeof r==`object`&&`modules`in r?[...r.modules||[]]:[];i.push(t),a.value={...a.value,[n]:{modules:i}},o.value=i.length-1}function D(e,t){if(o.value===null)return;let n=a.value.currentStyle,r=a.value[n],i=r&&typeof r==`object`&&`modules`in r?[...r.modules||[]]:[];if(i[o.value]){let r={...i[o.value],[e]:t};i[o.value]=r,a.value={...a.value,[n]:{modules:i}}}}function te(){if(o.value===null)return;let e=a.value.currentStyle,t=a.value[e],n=t&&typeof t==`object`&&`modules`in t?[...t.modules||[]]:[];n.splice(o.value,1),a.value={...a.value,[e]:{modules:n}},o.value=null}function ne(e){let t=a.value.currentStyle,n=a.value[t],r=n&&typeof n==`object`&&`modules`in n?[...n.modules||[]]:[];if(e){let e=[];for(let t=0;t<r.length;t++){let n=r[t];if(n&&!(n.type===`usage`&&n.text===`|`)&&(e.push(n),t<r.length-1)){let n=r[t+1],i=n&&n.type===`usage`&&n.text===`|`;n&&!i&&e.push({type:`usage`,text:`|`,color:`white`})}}a.value={...a.value,[t]:{modules:e}}}else{let e=r.filter(e=>e?!(e.type===`usage`&&e.text===`|`):!1);if(a.value={...a.value,[t]:{modules:e}},o.value!==null&&o.value<r.length){let e=r[o.value];e&&e.type===`usage`&&e.text===`|`&&(o.value=null)}}c(e)}function O(){ne(!s.value)}function k(){d(!l.value)}function A(e){a.value={...a.value,enabled:e}}function re(e){if(!e||typeof e!=`string`)return 0;let t=e.trim().toLowerCase(),n=t.match(/^([\d.]+)\s*([kmg]?)$/);if(!n||!n[1]){let e=parseFloat(t);return isNaN(e)?0:e}let r=parseFloat(n[1]);switch(n[2]||``){case`k`:return r*1e3;case`m`:return r*1e6;case`g`:return r*1e9;default:return r}}function j(t,n){let r=t.progressInput||``,i=t.progressOutput||``,a=t.progressLength||20,o=t.progressBgColor||``,s=t.progressColor||``,c=t.progressStyle||`block`,l=Ze(r,e.value),u=Ze(i,e.value),d=re(l),f=re(u),p=0;f>0&&(p=d/f*100);function m(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return!t||!t[1]||!t[2]||!t[3]?``:`rgb(${parseInt(t[1],16)}, ${parseInt(t[2],16)}, ${parseInt(t[3],16)})`}function h(e){return/^rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/i.test(e)}function g(e){return/^#[0-9A-F]{6}$/i.test(e)}let _=o||`rgb(51, 65, 85)`;o&&(g(o)?_=m(o):h(o)||(_=`rgb(51, 65, 85)`));let v=s||`rgb(34, 211, 238)`;return s&&(g(s)?v=m(s):h(s)||(v=`rgb(34, 211, 238)`)),{isProgress:!0,percentage:p,progressLength:a,progressStyle:c,bgColor:_,progressColor:v,bgColorStyle:n?{backgroundColor:_}:{},bgColorClass:``,textColorStyle:{},textColorClass:``,borderLeftColor:n?o&&g(o)||o&&h(o)?o:`#374151`:void 0,icon:t.icon||``,text:``,background:t.background}}function ie(t,n){if(t.type===`progress`)return j(t,n);let r=Ze(t.text||``,e.value),i=t.icon||``,a=t.color||``,o=t.background||``;function s(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return!t||!t[1]||!t[2]||!t[3]?``:`rgb(${parseInt(t[1],16)}, ${parseInt(t[2],16)}, ${parseInt(t[3],16)})`}function c(e){let t=e.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i);return!t||!t[1]||!t[2]||!t[3]?``:`#${parseInt(t[1],10).toString(16).padStart(2,`0`)}${parseInt(t[2],10).toString(16).padStart(2,`0`)}${parseInt(t[3],10).toString(16).padStart(2,`0`)}`}function l(e){return/^rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/i.test(e)}function u(e){if(!e)return[];if(Array.isArray(e))return e;if(typeof e==`string`)try{let t=JSON.parse(e);return Array.isArray(t)?t:[t]}catch{return[e]}return[]}function d(e){let t={},n=!1,r=!1;for(let i of e)switch(i){case`bold`:t.fontWeight=`bold`;break;case`dim`:t.opacity=`0.6`;break;case`normal`:t.fontWeight=`normal`,t.opacity=`1`;break;case`underline`:t.textDecoration=`underline`;break;case`noUnderline`:t.textDecoration=`none`;break;case`reverse`:n=!0;break;case`noReverse`:r=!0;break}return n&&!r&&(t.filter=`invert(1)`),t}let f=u(t.style),p=d(f);if(n){let e={},n=`#374151`;o&&(l(o)?(e={backgroundColor:o},n=c(o)||`#374151`):Qe(o)&&(e={backgroundColor:s(o)},n=o));let u={};if(a?l(a)?u={color:a}:Qe(a)&&(u={color:s(a)}):u={color:`rgb(255, 255, 255)`},f.includes(`reverse`)&&!f.includes(`noReverse`)){let a={...e};e={...u},u=a;let{filter:o,...s}=p;return{bgColorStyle:{...e,...s},bgColorClass:``,textColorStyle:{...u,...s},textColorClass:``,borderLeftColor:n,icon:i,text:r,background:t.background}}return{bgColorStyle:{...e,...p},bgColorClass:``,textColorStyle:{...u,...p},textColorClass:``,borderLeftColor:n,icon:i,text:r,background:t.background}}let m={};if(a&&(l(a)?m={color:a}:Qe(a)&&(m={color:s(a)})),o&&(l(o)?m.backgroundColor=o:Qe(o)&&(m.backgroundColor=s(o))),f.includes(`reverse`)&&!f.includes(`noReverse`)&&o){let e=``;l(o)?e=o:Qe(o)&&(e=s(o)),e&&(m={...m,backgroundColor:m.color||`rgb(255, 255, 255)`,color:e});let{filter:t,...n}=p;return{textStyle:{...m,...n},textClass:``,icon:i,text:r}}return{textStyle:{...m,...p},textClass:``,icon:i,text:r}}let ae=g(()=>Object.keys(a.value).filter(e=>e!==`enabled`&&e!==`currentStyle`&&typeof a.value[e]==`object`&&`modules`in a.value[e]));function M(e){if(!e||e.trim()===``)return i(`ä¸»é¢˜åç§°ä¸èƒ½ä¸ºç©º`,`error`),!1;if(e===`enabled`||e===`currentStyle`)return i(`ä¸»é¢˜åç§°ä¸èƒ½ä¸º enabled æˆ– currentStyle`,`error`),!1;if(a.value[e])return i(`ä¸»é¢˜åç§°å·²å­˜åœ¨`,`error`),!1;let t=a.value.currentStyle,n=a.value[t],r=n&&typeof n==`object`&&`modules`in n?[...n.modules||[]]:[];return a.value={...a.value,[e]:{modules:r}},i(`ä¸»é¢˜æ¨¡æ¿ "${e}" å·²åˆ›å»º`,`success`),!0}function N(e){if(e===a.value.currentStyle)return i(`ä¸èƒ½åˆ é™¤å½“å‰æ­£åœ¨ä½¿ç”¨çš„ä¸»é¢˜æ¨¡æ¿`,`error`),!1;if(!a.value[e])return i(`ä¸»é¢˜æ¨¡æ¿ä¸å­˜åœ¨`,`error`),!1;let t={...a.value};return delete t[e],a.value=t,i(`ä¸»é¢˜æ¨¡æ¿ "${e}" å·²åˆ é™¤`,`success`),!0}function oe(e){if(!a.value[e])return i(`æºä¸»é¢˜æ¨¡æ¿ä¸å­˜åœ¨`,`error`),!1;let t=`${e} å‰¯æœ¬`,n=1;for(;a.value[t];)t=`${e} å‰¯æœ¬ ${n}`,n++;let r=a.value[e];if(r&&typeof r==`object`&&`modules`in r){let n=[...r.modules||[]];return a.value={...a.value,[t]:{modules:n}},i(`ä¸»é¢˜æ¨¡æ¿ "${e}" å·²å¤åˆ¶ä¸º "${t}"`,`success`),!0}return i(`å¤åˆ¶ä¸»é¢˜æ¨¡æ¿å¤±è´¥`,`error`),!1}function se(e,t){if(!t||t.trim()===``)return i(`ä¸»é¢˜åç§°ä¸èƒ½ä¸ºç©º`,`error`),!1;if(t===`enabled`||t===`currentStyle`)return i(`ä¸»é¢˜åç§°ä¸èƒ½ä¸º enabled æˆ– currentStyle`,`error`),!1;if(!a.value[e])return i(`åŽŸä¸»é¢˜æ¨¡æ¿ä¸å­˜åœ¨`,`error`),!1;if(a.value[t])return i(`æ–°ä¸»é¢˜åç§°å·²å­˜åœ¨`,`error`),!1;let n=a.value[e],r={...a.value};return delete r[e],r[t]=n,e===a.value.currentStyle&&(r.currentStyle=t),a.value=r,i(`ä¸»é¢˜æ¨¡æ¿å·²ä»Ž "${e}" é‡å‘½åä¸º "${t}"`,`success`),!0}function ce(e){if(a.value.currentStyle===e)return!0;let t=e=>{let t=a.value[e];return t&&typeof t==`object`&&`modules`in t?t:null},n=a.value.currentStyle,r=t(n),s=r?[...r.modules||[]]:[],c=t(e),l=c?[...c.modules||[]]:[];if((!c||l.length===0)&&s.length>0)a.value={...a.value,[e]:{modules:[...s]},currentStyle:e};else if(c)a.value.currentStyle=e;else return i(`ä¸»é¢˜æ¨¡æ¿ä¸å­˜åœ¨`,`error`),!1;return o.value=null,!0}return{statusLineConfig:a,selectedModuleIndex:o,selectedModule:v,autoSeparator:s,showIcon:l,isLoading:f,isSaving:p,hasUnsavedChanges:S,currentModules:h,draggableModules:_,themeNames:ae,loadConfig:C,refreshConfig:T,handleSave:w,handleThemeChange:E,handleAddModule:ee,handleModuleChange:D,handleDeleteModule:te,toggleAutoSeparator:O,toggleShowIcon:k,renderModulePreview:ie,handleEnabledChange:A,addThemeTemplate:M,deleteThemeTemplate:N,duplicateThemeTemplate:oe,renameThemeTemplate:se,switchThemeTemplate:ce}}var tt=[`placeholder`],nt={key:0,class:`text-xs px-1.5 py-0.5 bg-indigo-100 text-indigo-700 rounded`},rt={class:`flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity`},it=O({__name:`ThemeItem`,props:{mode:{},name:{},isCurrent:{type:Boolean,default:!1},placeholder:{default:`è¾“å…¥ä¸»é¢˜åç§°`}},emits:[`confirm`,`cancel`,`click`,`delete`,`edit`,`duplicate`],setup(t,{expose:o,emit:s}){let l=t,d=s,f=x(!1),p=x(``),h=x(null);l.mode===`edit`&&l.name&&(p.value=l.name),u(f,()=>{f.value&&j(()=>{h.value?.focus(),h.value?.select()})}),u(()=>l.name,e=>{l.mode===`edit`&&!f.value&&e&&(p.value=e)});function g(){l.mode===`add`&&!f.value?(f.value=!0,p.value=``):l.mode===`edit`&&!f.value&&d(`click`)}function v(){p.value.trim()&&(d(`confirm`,p.value.trim()),l.mode===`add`&&(f.value=!1,p.value=``))}function b(){l.mode===`add`?(f.value=!1,p.value=``):l.mode===`edit`&&(f.value=!1,p.value=l.name||``),d(`cancel`)}function E(){confirm(`ç¡®å®šè¦åˆ é™¤ä¸»é¢˜æ¨¡æ¿ "${l.name}" å—ï¼Ÿ`)&&d(`delete`)}function ee(){f.value=!0,p.value=l.name||``,d(`edit`)}function D(){d(`duplicate`)}return o({startEdit:()=>{f.value=!0,p.value=l.name||``},cancelEdit:()=>{f.value=!1,l.mode===`edit`&&l.name&&(p.value=l.name)}}),(o,s)=>t.mode===`add`?(k(),C(`div`,{key:0,class:w([`group relative flex items-center gap-2 px-3 py-2 bg-white border border-dashed rounded-lg transition-all cursor-pointer h-[38px]`,f.value?`border-indigo-500 bg-indigo-50 shadow-sm`:`border-slate-300 hover:border-indigo-400 hover:bg-indigo-50/50`]),onClick:F(g,[`stop`])},[f.value?(k(),C(S,{key:0},[re(N(`input`,{ref_key:`inputRef`,ref:h,"onUpdate:modelValue":s[0]||=e=>p.value=e,type:`text`,placeholder:t.placeholder,class:`flex-1 h-6 px-2 text-sm bg-transparent focus:outline-none`,onKeyup:[y(v,[`enter`]),y(b,[`esc`])],onClick:s[1]||=F(()=>{},[`stop`])},null,40,tt),[[m,p.value]]),N(`button`,{class:`p-1 text-indigo-600 hover:bg-indigo-100 rounded transition-colors shrink-0`,onClick:F(v,[`stop`]),title:`ç¡®è®¤`},[c(M(n),{class:`w-4 h-4`})]),N(`button`,{class:`p-1 text-slate-500 hover:bg-slate-100 rounded transition-colors shrink-0`,onClick:F(b,[`stop`]),title:`å–æ¶ˆ`},[c(M(se),{class:`w-4 h-4`})])],64)):(k(),C(S,{key:1},[c(M(e),{class:`w-4 h-4 text-slate-500`}),s[5]||=N(`span`,{class:`text-sm font-medium text-slate-600`},`æ·»åŠ ä¸»é¢˜`,-1)],64))],2)):(k(),C(`div`,{key:1,class:w([`group relative flex items-center gap-2 px-3 py-2 bg-white border rounded-lg transition-all cursor-pointer h-[38px]`,t.isCurrent?`border-indigo-500 bg-indigo-50 shadow-sm`:`border-slate-200 hover:border-slate-300 hover:shadow-sm`]),onClick:s[4]||=F(e=>!f.value&&g(),[`stop`])},[f.value?(k(),C(S,{key:0},[re(N(`input`,{ref_key:`inputRef`,ref:h,"onUpdate:modelValue":s[2]||=e=>p.value=e,type:`text`,class:`flex-1 h-6 px-2 text-sm bg-transparent focus:outline-none`,onKeyup:[y(v,[`enter`]),y(b,[`esc`])],onClick:s[3]||=F(()=>{},[`stop`])},null,544),[[m,p.value]]),N(`button`,{class:`p-1 text-indigo-600 hover:bg-indigo-100 rounded transition-colors shrink-0`,onClick:F(v,[`stop`]),title:`ç¡®è®¤`},[c(M(n),{class:`w-4 h-4`})]),N(`button`,{class:`p-1 text-slate-500 hover:bg-slate-100 rounded transition-colors shrink-0`,onClick:F(b,[`stop`]),title:`å–æ¶ˆ`},[c(M(se),{class:`w-4 h-4`})])],64)):(k(),C(S,{key:1},[N(`span`,{class:w([`text-sm font-medium`,t.isCurrent?`text-indigo-700`:`text-slate-700`])},_(t.name),3),t.isCurrent?(k(),C(`span`,nt,` å½“å‰ `)):T(``,!0),N(`div`,rt,[N(`button`,{class:`p-1 text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors`,onClick:F(D,[`stop`]),title:`å¤åˆ¶`},[c(M(r),{class:`w-3.5 h-3.5`})]),N(`button`,{class:`p-1 text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors`,onClick:F(ee,[`stop`]),title:`é‡å‘½å`},[c(M(a),{class:`w-3.5 h-3.5`})]),t.isCurrent?T(``,!0):(k(),C(`button`,{key:0,class:`p-1 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded transition-colors`,onClick:F(E,[`stop`]),title:`åˆ é™¤`},[c(M(i),{class:`w-3.5 h-3.5`})]))])],64))],2))}}),at={class:`space-y-4`},ot={class:`flex items-end gap-4 flex-wrap`},st={class:`space-y-2`},ct={class:`space-y-2`},lt={class:`flex gap-2`},ut={class:`space-y-2`},dt={class:`flex flex-wrap gap-2`},ft=O({__name:`ThemeFontControls`,props:{currentStyle:{},themeNames:{},autoSeparator:{type:Boolean},enabled:{type:Boolean},showIcon:{type:Boolean}},emits:[`update:style`,`toggleAutoSeparator`,`toggleShowIcon`,`update:enabled`,`add-theme`,`delete-theme`,`rename-theme`,`duplicate-theme`],setup(e,{emit:t}){let n=e,r=t,i=x({});function a(e){r(`add-theme`,e)}function l(e){r(`delete-theme`,e)}function u(e,t){r(`rename-theme`,e,t),j(()=>{let n=i.value[t]||i.value[e];n&&n.cancelEdit()})}function d(e){r(`duplicate-theme`,e)}function f(e){r(`update:style`,e)}return(t,p)=>(k(),C(`div`,at,[N(`div`,ot,[N(`div`,st,[p[3]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`å¯ç”¨ StatusLine`,-1),N(`button`,{class:w([`btn-secondary h-[38px] px-3 flex items-center gap-2 transition-colors`,n.enabled?`bg-green-50 hover:bg-green-100`:``]),onClick:p[0]||=e=>r(`update:enabled`,!n.enabled),title:`å¯ç”¨/ç¦ç”¨ StatusLine`},[(k(),h(D(n.enabled?M(Ue):M(Ve)),{class:w([`w-5 h-5`,n.enabled?`text-green-600`:``])},null,8,[`class`])),N(`span`,{class:w([`text-xs font-medium`,n.enabled?`text-green-700`:``])},`å¯ç”¨ StatusLine`,2)],2)]),N(`div`,ct,[p[6]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`å·¥å…·`,-1),N(`div`,lt,[N(`button`,{class:w([`btn-secondary h-[38px] px-3 flex items-center gap-2`,n.autoSeparator?`bg-indigo-50 border-indigo-300 text-indigo-700`:``]),onClick:p[1]||=e=>r(`toggleAutoSeparator`),title:`è‡ªåŠ¨åˆ†å‰²ï¼šåœ¨ç»„ä»¶ä¹‹é—´æ·»åŠ åˆ†å‰²çº¿`},[c(M(ze),{class:`w-4 h-4`}),p[4]||=N(`span`,{class:`text-xs font-medium`},`è‡ªåŠ¨åˆ†å‰²`,-1)],2),N(`button`,{class:w([`btn-secondary h-[38px] px-3 flex items-center gap-2`,n.showIcon?`bg-indigo-50 border-indigo-300 text-indigo-700`:``]),onClick:p[2]||=e=>r(`toggleShowIcon`),title:`åˆ‡æ¢æ˜¯å¦æ˜¾ç¤ºå›¾æ ‡`},[(k(),h(D(n.showIcon?M(s):M(o)),{class:`w-4 h-4`})),p[5]||=N(`span`,{class:`text-xs font-medium`},`æ˜¾ç¤ºå›¾æ ‡`,-1)],2)])])]),N(`div`,ut,[p[7]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`ä¸»é¢˜æ¨¡æ¿`,-1),N(`div`,dt,[c(it,{mode:`add`,onConfirm:a,onCancel:()=>{}}),(k(!0),C(S,null,P(e.themeNames,t=>(k(),h(it,{key:t,ref_for:!0,ref:e=>i.value[t]=e,mode:`edit`,name:t,"is-current":t===e.currentStyle,onConfirm:e=>u(t,e),onCancel:()=>{let e=i.value[t];e&&e.cancelEdit()},onClick:()=>f(t),onDelete:()=>l(t),onDuplicate:()=>d(t)},null,8,[`name`,`is-current`,`onConfirm`,`onCancel`,`onClick`,`onDelete`,`onDuplicate`]))),128))])])]))}}),pt=Object.defineProperty,mt=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,_t=(e,t,n)=>t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vt=(e,t)=>{for(var n in t||={})ht.call(t,n)&&_t(e,n,t[n]);if(mt)for(var n of mt(t))gt.call(t,n)&&_t(e,n,t[n]);return e},yt=(e,t)=>{var n={};for(var r in e)ht.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mt)for(var r of mt(e))t.indexOf(r)<0&&gt.call(e,r)&&(n[r]=e[r]);return n},bt=`[vue-draggable-plus]: `;function xt(e){console.warn(bt+e)}function St(e){console.error(bt+e)}function Ct(e,t,n){return n>=0&&n<e.length&&e.splice(n,0,e.splice(t,1)[0]),e}function wt(e){return e.replace(/-(\w)/g,(e,t)=>t?t.toUpperCase():``)}function Tt(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[wt(n)]=e[n]),t),{})}function Et(e,t){return Array.isArray(e)&&e.splice(t,1),e}function Dt(e,t,n){return Array.isArray(e)&&e.splice(t,0,n),e}function Ot(e){return e===void 0}function kt(e){return typeof e==`string`}function At(e,t,n){let r=e.children[n];e.insertBefore(t,r)}function jt(e){e.parentNode&&e.parentNode.removeChild(e)}function Mt(e,t=document){let n=null;return n=typeof t?.querySelector==`function`?(t?.querySelector)?.call(t,e):document.querySelector(e),n||xt(`Element not found: ${e}`),n}function Nt(e,t,n=null){return function(...r){return e.apply(n,r),t.apply(n,r)}}function Pt(e,t){let n=vt({},e);return Object.keys(t).forEach(r=>{n[r]?n[r]=Nt(e[r],t[r]):n[r]=t[r]}),n}function Ft(e){return e instanceof HTMLElement}function It(e,t){Object.keys(e).forEach(n=>{t(n,e[n])})}function Lt(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}var Rt=Object.assign;function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?zt(Object(n),!0).forEach(function(t){Ht(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vt(e){"@babel/helpers - typeof";return Vt=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},Vt(e)}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(){return Ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ut.apply(this,arguments)}function Wt(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Gt(e,t){if(e==null)return{};var n=Wt(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Kt=`1.15.2`;function qt(e){if(typeof window<`u`&&window.navigator)return!!navigator.userAgent.match(e)}var Jt=qt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Yt=qt(/Edge/i),Xt=qt(/firefox/i),Zt=qt(/safari/i)&&!qt(/chrome/i)&&!qt(/android/i),Qt=qt(/iP(ad|od|hone)/i),$t=qt(/chrome/i)&&qt(/android/i),en={capture:!1,passive:!1};function I(e,t,n){e.addEventListener(t,n,!Jt&&en)}function L(e,t,n){e.removeEventListener(t,n,!Jt&&en)}function tn(e,t){if(t){if(t[0]===`>`&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function nn(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function rn(e,t,n,r){if(e){n||=document;do{if(t!=null&&(t[0]===`>`?e.parentNode===n&&tn(e,t):tn(e,t))||r&&e===n)return e;if(e===n)break}while(e=nn(e))}return null}var an=/\s+/g;function R(e,t,n){e&&t&&(e.classList?e.classList[n?`add`:`remove`](t):e.className=((` `+e.className+` `).replace(an,` `).replace(` `+t+` `,` `)+(n?` `+t:``)).replace(an,` `))}function z(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,``):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf(`webkit`)===-1&&(t=`-webkit-`+t),r[t]=n+(typeof n==`string`?``:`px`)}}function on(e,t){var n=``;if(typeof e==`string`)n=e;else do{var r=z(e,`transform`);r&&r!==`none`&&(n=r+` `+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function sn(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,a=r.length;if(n)for(;i<a;i++)n(r[i],i);return r}return[]}function cn(){return document.scrollingElement||document.documentElement}function B(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var a,o,s,c,l,u,d;if(e!==window&&e.parentNode&&e!==cn()?(a=e.getBoundingClientRect(),o=a.top,s=a.left,c=a.bottom,l=a.right,u=a.height,d=a.width):(o=0,s=0,c=window.innerHeight,l=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i||=e.parentNode,!Jt))do if(i&&i.getBoundingClientRect&&(z(i,`transform`)!==`none`||n&&z(i,`position`)!==`static`)){var f=i.getBoundingClientRect();o-=f.top+parseInt(z(i,`border-top-width`)),s-=f.left+parseInt(z(i,`border-left-width`)),c=o+a.height,l=s+a.width;break}while(i=i.parentNode);if(r&&e!==window){var p=on(i||e),m=p&&p.a,h=p&&p.d;p&&(o/=h,s/=m,d/=m,u/=h,c=o+u,l=s+d)}return{top:o,left:s,bottom:c,right:l,width:d,height:u}}}function ln(e,t,n){for(var r=hn(e,!0),i=B(e)[t];r;){var a=B(r)[n],o=void 0;if(o=i>=a,!o)return r;if(r===cn())break;r=hn(r,!1)}return!1}function un(e,t,n,r){for(var i=0,a=0,o=e.children;a<o.length;){if(o[a].style.display!==`none`&&o[a]!==Q.ghost&&(r||o[a]!==Q.dragged)&&rn(o[a],n.draggable,e,!1)){if(i===t)return o[a];i++}a++}return null}function dn(e,t){for(var n=e.lastElementChild;n&&(n===Q.ghost||z(n,`display`)===`none`||t&&!tn(n,t));)n=n.previousElementSibling;return n||null}function fn(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!==`TEMPLATE`&&e!==Q.clone&&(!t||tn(e,t))&&n++;return n}function pn(e){var t=0,n=0,r=cn();if(e)do{var i=on(e),a=i.a,o=i.d;t+=e.scrollLeft*a,n+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[t,n]}function mn(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function hn(e,t){if(!e||!e.getBoundingClientRect)return cn();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=z(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX==`auto`||i.overflowX==`scroll`)||n.clientHeight<n.scrollHeight&&(i.overflowY==`auto`||i.overflowY==`scroll`)){if(!n.getBoundingClientRect||n===document.body)return cn();if(r||t)return n;r=!0}}while(n=n.parentNode);return cn()}function gn(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function _n(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var vn;function yn(e,t){return function(){if(!vn){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),vn=setTimeout(function(){vn=void 0},t)}}}function bn(){clearTimeout(vn),vn=void 0}function xn(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Sn(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Cn(e,t,n){var r={};return Array.from(e.children).forEach(function(i){if(!(!rn(i,t.draggable,e,!1)||i.animated||i===n)){var a=B(i);r.left=Math.min(r.left??1/0,a.left),r.top=Math.min(r.top??1/0,a.top),r.right=Math.max(r.right??-1/0,a.right),r.bottom=Math.max(r.bottom??-1/0,a.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var V=`Sortable`+new Date().getTime();function wn(){var e=[],t;return{captureAnimationState:function(){e=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if(!(z(t,`display`)===`none`||t===Q.ghost)){e.push({target:t,rect:B(t)});var n=Bt({},e[e.length-1].rect);if(t.thisAnimationDuration){var r=on(t,!0);r&&(n.top-=r.f,n.left-=r.e)}t.fromRect=n}})},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(mn(e,{target:t}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(t),typeof n==`function`&&n();return}var i=!1,a=0;e.forEach(function(e){var t=0,n=e.target,o=n.fromRect,s=B(n),c=n.prevFromRect,l=n.prevToRect,u=e.rect,d=on(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&_n(c,s)&&!_n(o,s)&&(u.top-s.top)/(u.left-s.left)===(o.top-s.top)/(o.left-s.left)&&(t=En(u,c,l,r.options)),_n(s,o)||(n.prevFromRect=o,n.prevToRect=s,t||=r.options.animation,r.animate(n,u,s,t)),t&&(i=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},t),n.thisAnimationDuration=t)}),clearTimeout(t),i?t=setTimeout(function(){typeof n==`function`&&n()},a):typeof n==`function`&&n(),e=[]},animate:function(e,t,n,r){if(r){z(e,`transition`,``),z(e,`transform`,``);var i=on(this.el),a=i&&i.a,o=i&&i.d,s=(t.left-n.left)/(a||1),c=(t.top-n.top)/(o||1);e.animatingX=!!s,e.animatingY=!!c,z(e,`transform`,`translate3d(`+s+`px,`+c+`px,0)`),this.forRepaintDummy=Tn(e),z(e,`transition`,`transform `+r+`ms`+(this.options.easing?` `+this.options.easing:``)),z(e,`transform`,`translate3d(0,0,0)`),typeof e.animated==`number`&&clearTimeout(e.animated),e.animated=setTimeout(function(){z(e,`transition`,``),z(e,`transform`,``),e.animated=!1,e.animatingX=!1,e.animatingY=!1},r)}}}}function Tn(e){return e.offsetWidth}function En(e,t,n,r){return Math.sqrt((t.top-e.top)**2+(t.left-e.left)**2)/Math.sqrt((t.top-n.top)**2+(t.left-n.left)**2)*r.animation}var Dn=[],On={initializeByDefault:!0},kn={mount:function(e){for(var t in On)On.hasOwnProperty(t)&&!(t in e)&&(e[t]=On[t]);Dn.forEach(function(t){if(t.pluginName===e.pluginName)throw`Sortable: Cannot mount plugin ${e.pluginName} more than once`}),Dn.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=e+`Global`;Dn.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][i]&&t[r.pluginName][i](Bt({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](Bt({sortable:t},n)))})},initializePlugins:function(e,t,n,r){for(var i in Dn.forEach(function(r){var i=r.pluginName;if(!(!e.options[i]&&!r.initializeByDefault)){var a=new r(e,t,e.options);a.sortable=e,a.options=e.options,e[i]=a,Ut(n,a.defaults)}}),e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);a!==void 0&&(e.options[i]=a)}},getEventProperties:function(e,t){var n={};return Dn.forEach(function(r){typeof r.eventProperties==`function`&&Ut(n,r.eventProperties.call(t[r.pluginName],e))}),n},modifyOption:function(e,t,n){var r;return Dn.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[t]==`function`&&(r=i.optionListeners[t].call(e[i.pluginName],n))}),r}};function An(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,a=e.cloneEl,o=e.toEl,s=e.fromEl,c=e.oldIndex,l=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t||=n&&n[V],t){var h,g=t.options,_=`on`+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Jt&&!Yt?h=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(h=document.createEvent(`Event`),h.initEvent(r,!0,!0)),h.to=o||n,h.from=s||n,h.item=i||n,h.clone=a,h.oldIndex=c,h.newIndex=l,h.oldDraggableIndex=u,h.newDraggableIndex=d,h.originalEvent=f,h.pullMode=p?p.lastPutMode:void 0;var v=Bt(Bt({},m),kn.getEventProperties(r,t));for(var y in v)h[y]=v[y];n&&n.dispatchEvent(h),g[_]&&g[_].call(t,h)}}var jn=[`evt`],H=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,i=Gt(n,jn);kn.pluginEvent.bind(Q)(e,t,Bt({dragEl:W,parentEl:G,ghostEl:K,rootEl:q,nextEl:Mn,lastDownEl:Nn,cloneEl:J,cloneHidden:Pn,dragStarted:Jn,putSortable:X,activeSortable:Q.active,originalEvent:r,oldIndex:Fn,oldDraggableIndex:In,newIndex:Y,newDraggableIndex:Ln,hideGhostForTarget:fr,unhideGhostForTarget:pr,cloneNowHidden:function(){Pn=!0},cloneNowShown:function(){Pn=!1},dispatchSortableEvent:function(e){U({sortable:t,name:e,originalEvent:r})}},i))};function U(e){An(Bt({putSortable:X,cloneEl:J,targetEl:W,rootEl:q,oldIndex:Fn,oldDraggableIndex:In,newIndex:Y,newDraggableIndex:Ln},e))}var W,G,K,q,Mn,Nn,J,Pn,Fn,Y,In,Ln,Rn,X,zn=!1,Bn=!1,Vn=[],Hn,Un,Wn,Gn,Kn,qn,Jn,Yn,Xn,Zn=!1,Qn=!1,$n,Z,er=[],tr=!1,nr=[],rr=typeof document<`u`,ir=Qt,ar=Yt||Jt?`cssFloat`:`float`,or=rr&&!$t&&!Qt&&`draggable`in document.createElement(`div`),sr=function(){if(rr){if(Jt)return!1;var e=document.createElement(`x`);return e.style.cssText=`pointer-events:auto`,e.style.pointerEvents===`auto`}}(),cr=function(e,t){var n=z(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=un(e,0,t),a=un(e,1,t),o=i&&z(i),s=a&&z(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+B(i).width,l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+B(a).width;if(n.display===`flex`)return n.flexDirection===`column`||n.flexDirection===`column-reverse`?`vertical`:`horizontal`;if(n.display===`grid`)return n.gridTemplateColumns.split(` `).length<=1?`vertical`:`horizontal`;if(i&&o.float&&o.float!==`none`){var u=o.float===`left`?`left`:`right`;return a&&(s.clear===`both`||s.clear===u)?`vertical`:`horizontal`}return i&&(o.display===`block`||o.display===`flex`||o.display===`table`||o.display===`grid`||c>=r&&n[ar]===`none`||a&&n[ar]===`none`&&c+l>r)?`vertical`:`horizontal`},lr=function(e,t,n){var r=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?t.left:t.top,s=n?t.right:t.bottom,c=n?t.width:t.height;return r===o||i===s||r+a/2===o+c/2},ur=function(e,t){var n;return Vn.some(function(r){var i=r[V].options.emptyInsertThreshold;if(!(!i||dn(r))){var a=B(r),o=e>=a.left-i&&e<=a.right+i,s=t>=a.top-i&&t<=a.bottom+i;if(o&&s)return n=r}}),n},dr=function(e){function t(e,n){return function(r,i,a,o){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(e==null&&(n||s))return!0;if(e==null||e===!1)return!1;if(n&&e===`clone`)return e;if(typeof e==`function`)return t(e(r,i,a,o),n)(r,i,a,o);var c=(n?r:i).options.group.name;return e===!0||typeof e==`string`&&e===c||e.join&&e.indexOf(c)>-1}}var n={},r=e.group;(!r||Vt(r)!=`object`)&&(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},fr=function(){!sr&&K&&z(K,`display`,`none`)},pr=function(){!sr&&K&&z(K,`display`,``)};rr&&!$t&&document.addEventListener(`click`,function(e){if(Bn)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Bn=!1,!1},!0);var mr=function(e){if(W){e=e.touches?e.touches[0]:e;var t=ur(e.clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[V]._onDragOver(n)}}},hr=function(e){W&&W.parentNode[V]._isOutsideThisEl(e.target)};function Q(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw`Sortable: \`el\` must be an HTMLElement, not ${{}.toString.call(e)}`;this.el=e,this.options=t=Ut({},t),e[V]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?`>li`:`>*`,swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return cr(e,this.options)},ghostClass:`sortable-ghost`,chosenClass:`sortable-chosen`,dragClass:`sortable-drag`,ignore:`a, img`,filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData(`Text`,t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:`data-id`,delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:`sortable-fallback`,fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Q.supportPointer!==!1&&`PointerEvent`in window&&!Zt,emptyInsertThreshold:5};for(var r in kn.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var i in dr(t),this)i.charAt(0)===`_`&&typeof this[i]==`function`&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:or,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?I(e,`pointerdown`,this._onTapStart):(I(e,`mousedown`,this._onTapStart),I(e,`touchstart`,this._onTapStart)),this.nativeDraggable&&(I(e,`dragover`,this),I(e,`dragenter`,this)),Vn.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ut(this,wn())}Q.prototype={constructor:Q,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Yn=null)},_getDirection:function(e,t){return typeof this.options.direction==`function`?this.options.direction.call(this,e,t,W):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,i=r.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType===`touch`&&e,s=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,l=r.filter;if(Tr(n),!W&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Zt&&s&&s.tagName.toUpperCase()===`SELECT`)&&(s=rn(s,r.draggable,n,!1),!(s&&s.animated)&&Nn!==s)){if(Fn=fn(s),In=fn(s,r.draggable),typeof l==`function`){if(l.call(this,e,s,this)){U({sortable:t,rootEl:c,name:`filter`,targetEl:s,toEl:n,fromEl:n}),H(`filter`,t,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(l&&(l=l.split(`,`).some(function(r){if(r=rn(c,r.trim(),n,!1),r)return U({sortable:t,rootEl:r,name:`filter`,targetEl:s,fromEl:n,toEl:n}),H(`filter`,t,{evt:e}),!0}),l)){i&&e.cancelable&&e.preventDefault();return}r.handle&&!rn(c,r.handle,n,!1)||this._prepareDragStart(e,o,s)}}},_prepareDragStart:function(e,t,n){var r=this,i=r.el,a=r.options,o=i.ownerDocument,s;if(n&&!W&&n.parentNode===i){var c=B(n);if(q=i,W=n,G=W.parentNode,Mn=W.nextSibling,Nn=n,Rn=a.group,Q.dragged=W,Hn={target:W,clientX:(t||e).clientX,clientY:(t||e).clientY},Kn=Hn.clientX-c.left,qn=Hn.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,W.style[`will-change`]=`all`,s=function(){if(H(`delayEnded`,r,{evt:e}),Q.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Xt&&r.nativeDraggable&&(W.draggable=!0),r._triggerDragStart(e,t),U({sortable:r,name:`choose`,originalEvent:e}),R(W,a.chosenClass,!0)},a.ignore.split(`,`).forEach(function(e){sn(W,e.trim(),vr)}),I(o,`dragover`,mr),I(o,`mousemove`,mr),I(o,`touchmove`,mr),I(o,`mouseup`,r._onDrop),I(o,`touchend`,r._onDrop),I(o,`touchcancel`,r._onDrop),Xt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,W.draggable=!0),H(`delayStart`,this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Yt||Jt))){if(Q.eventCanceled){this._onDrop();return}I(o,`mouseup`,r._disableDelayedDrag),I(o,`touchend`,r._disableDelayedDrag),I(o,`touchcancel`,r._disableDelayedDrag),I(o,`mousemove`,r._delayedDragTouchMoveHandler),I(o,`touchmove`,r._delayedDragTouchMoveHandler),a.supportPointer&&I(o,`pointermove`,r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(s,a.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){W&&vr(W),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;L(e,`mouseup`,this._disableDelayedDrag),L(e,`touchend`,this._disableDelayedDrag),L(e,`touchcancel`,this._disableDelayedDrag),L(e,`mousemove`,this._delayedDragTouchMoveHandler),L(e,`touchmove`,this._delayedDragTouchMoveHandler),L(e,`pointermove`,this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t||=e.pointerType==`touch`&&e,!this.nativeDraggable||t?this.options.supportPointer?I(document,`pointermove`,this._onTouchMove):t?I(document,`touchmove`,this._onTouchMove):I(document,`mousemove`,this._onTouchMove):(I(W,`dragend`,this),I(q,`dragstart`,this._onDragStart));try{document.selection?Er(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(zn=!1,q&&W){H(`dragStarted`,this,{evt:t}),this.nativeDraggable&&I(document,`dragover`,hr);var n=this.options;!e&&R(W,n.dragClass,!1),R(W,n.ghostClass,!0),Q.active=this,e&&this._appendGhost(),U({sortable:this,name:`start`,originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Un){this._lastX=Un.clientX,this._lastY=Un.clientY,fr();for(var e=document.elementFromPoint(Un.clientX,Un.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Un.clientX,Un.clientY),e!==t);)t=e;if(W.parentNode[V]._isOutsideThisEl(e),t)do{if(t[V]){var n=void 0;if(n=t[V]._onDragOver({clientX:Un.clientX,clientY:Un.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);pr()}},_onTouchMove:function(e){if(Hn){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=K&&on(K,!0),o=K&&a&&a.a,s=K&&a&&a.d,c=ir&&Z&&pn(Z),l=(i.clientX-Hn.clientX+r.x)/(o||1)+(c?c[0]-er[0]:0)/(o||1),u=(i.clientY-Hn.clientY+r.y)/(s||1)+(c?c[1]-er[1]:0)/(s||1);if(!Q.active&&!zn){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(K){a?(a.e+=l-(Wn||0),a.f+=u-(Gn||0)):a={a:1,b:0,c:0,d:1,e:l,f:u};var d=`matrix(${a.a},${a.b},${a.c},${a.d},${a.e},${a.f})`;z(K,`webkitTransform`,d),z(K,`mozTransform`,d),z(K,`msTransform`,d),z(K,`transform`,d),Wn=l,Gn=u,Un=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!K){var e=this.options.fallbackOnBody?document.body:q,t=B(W,!0,ir,!0,e),n=this.options;if(ir){for(Z=e;z(Z,`position`)===`static`&&z(Z,`transform`)===`none`&&Z!==document;)Z=Z.parentNode;Z!==document.body&&Z!==document.documentElement?(Z===document&&(Z=cn()),t.top+=Z.scrollTop,t.left+=Z.scrollLeft):Z=cn(),er=pn(Z)}K=W.cloneNode(!0),R(K,n.ghostClass,!1),R(K,n.fallbackClass,!0),R(K,n.dragClass,!0),z(K,`transition`,``),z(K,`transform`,``),z(K,`box-sizing`,`border-box`),z(K,`margin`,0),z(K,`top`,t.top),z(K,`left`,t.left),z(K,`width`,t.width),z(K,`height`,t.height),z(K,`opacity`,`0.8`),z(K,`position`,ir?`absolute`:`fixed`),z(K,`zIndex`,`100000`),z(K,`pointerEvents`,`none`),Q.ghost=K,e.appendChild(K),z(K,`transform-origin`,Kn/parseInt(K.style.width)*100+`% `+qn/parseInt(K.style.height)*100+`%`)}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,i=n.options;if(H(`dragStart`,this,{evt:e}),Q.eventCanceled){this._onDrop();return}H(`setupClone`,this),Q.eventCanceled||(J=Sn(W),J.removeAttribute(`id`),J.draggable=!1,J.style[`will-change`]=``,this._hideClone(),R(J,this.options.chosenClass,!1),Q.clone=J),n.cloneId=Er(function(){H(`clone`,n),!Q.eventCanceled&&(n.options.removeCloneOnHide||q.insertBefore(J,W),n._hideClone(),U({sortable:n,name:`clone`}))}),!t&&R(W,i.dragClass,!0),t?(Bn=!0,n._loopId=setInterval(n._emulateDragOver,50)):(L(document,`mouseup`,n._onDrop),L(document,`touchend`,n._onDrop),L(document,`touchcancel`,n._onDrop),r&&(r.effectAllowed=`move`,i.setData&&i.setData.call(n,r,W)),I(document,`drop`,n),z(W,`transform`,`translateZ(0)`)),zn=!0,n._dragStartId=Er(n._dragStarted.bind(n,t,e)),I(document,`selectstart`,n),Jn=!0,Zt&&z(document.body,`user-select`,`none`)},_onDragOver:function(e){var t=this.el,n=e.target,r,i,a,o=this.options,s=o.group,c=Q.active,l=Rn===s,u=o.sort,d=X||c,f,p=this,m=!1;if(tr)return;function h(o,s){H(o,p,Bt({evt:e,isOwner:l,axis:f?`vertical`:`horizontal`,revert:a,dragRect:r,targetRect:i,canSort:u,fromSortable:d,target:n,completed:_,onMove:function(n,i){return _r(q,t,W,r,n,B(n),e,i)},changed:v},s))}function g(){h(`dragOverAnimationCapture`),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function _(r){return h(`dragOverCompleted`,{insertion:r}),r&&(l?c._hideClone():c._showClone(p),p!==d&&(R(W,X?X.options.ghostClass:c.options.ghostClass,!1),R(W,o.ghostClass,!0)),X!==p&&p!==Q.active?X=p:p===Q.active&&X&&(X=null),d===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){h(`dragOverAnimationComplete`),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===W&&!W.animated||n===t&&!n.animated)&&(Yn=null),!o.dragoverBubble&&!e.rootEl&&n!==document&&(W.parentNode[V]._isOutsideThisEl(e.target),!r&&mr(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function v(){Y=fn(W),Ln=fn(W,o.draggable),U({sortable:p,name:`change`,toEl:t,newIndex:Y,newDraggableIndex:Ln,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=rn(n,o.draggable,t,!0),h(`dragOver`),Q.eventCanceled)return m;if(W.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return _(!1);if(Bn=!1,c&&!o.disabled&&(l?u||(a=G!==q):X===this||(this.lastPutMode=Rn.checkPull(this,c,W,e))&&s.checkPut(this,c,W,e))){if(f=this._getDirection(e,n)===`vertical`,r=B(W),h(`dragOverValid`),Q.eventCanceled)return m;if(a)return G=q,g(),this._hideClone(),h(`revert`),Q.eventCanceled||(Mn?q.insertBefore(W,Mn):q.appendChild(W)),_(!0);var y=dn(t,o.draggable);if(!y||xr(e,f,this)&&!y.animated){if(y===W)return _(!1);if(y&&t===e.target&&(n=y),n&&(i=B(n)),_r(q,t,W,r,n,i,e,!!n)!==!1)return g(),y&&y.nextSibling?t.insertBefore(W,y.nextSibling):t.appendChild(W),G=t,v(),_(!0)}else if(y&&br(e,f,this)){var b=un(t,0,o,!0);if(b===W)return _(!1);if(n=b,i=B(n),_r(q,t,W,r,n,i,e,!1)!==!1)return g(),t.insertBefore(W,b),G=t,v(),_(!0)}else if(n.parentNode===t){i=B(n);var x=0,S,C=W.parentNode!==t,w=!lr(W.animated&&W.toRect||r,n.animated&&n.toRect||i,f),T=f?`top`:`left`,E=ln(n,`top`,`top`)||ln(W,`top`,`top`),ee=E?E.scrollTop:void 0;Yn!==n&&(S=i[T],Zn=!1,Qn=!w&&o.invertSwap||C),x=Sr(e,n,i,f,w?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,Qn,Yn===n);var D;if(x!==0){var te=fn(W);do te-=x,D=G.children[te];while(D&&(z(D,`display`)===`none`||D===K))}if(x===0||D===n)return _(!1);Yn=n,Xn=x;var ne=n.nextElementSibling,O=!1;O=x===1;var k=_r(q,t,W,r,n,i,e,O);if(k!==!1)return(k===1||k===-1)&&(O=k===1),tr=!0,setTimeout(yr,30),g(),O&&!ne?t.appendChild(W):n.parentNode.insertBefore(W,O?ne:n),E&&xn(E,0,ee-E.scrollTop),G=W.parentNode,S!==void 0&&!Qn&&($n=Math.abs(S-B(n)[T])),v(),_(!0)}if(t.contains(W))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){L(document,`mousemove`,this._onTouchMove),L(document,`touchmove`,this._onTouchMove),L(document,`pointermove`,this._onTouchMove),L(document,`dragover`,mr),L(document,`mousemove`,mr),L(document,`touchmove`,mr)},_offUpEvents:function(){var e=this.el.ownerDocument;L(e,`mouseup`,this._onDrop),L(e,`touchend`,this._onDrop),L(e,`pointerup`,this._onDrop),L(e,`touchcancel`,this._onDrop),L(document,`selectstart`,this)},_onDrop:function(e){var t=this.el,n=this.options;if(Y=fn(W),Ln=fn(W,n.draggable),H(`drop`,this,{evt:e}),G=W&&W.parentNode,Y=fn(W),Ln=fn(W,n.draggable),Q.eventCanceled){this._nulling();return}zn=!1,Qn=!1,Zn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Dr(this.cloneId),Dr(this._dragStartId),this.nativeDraggable&&(L(document,`drop`,this),L(t,`dragstart`,this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Zt&&z(document.body,`user-select`,``),z(W,`transform`,``),e&&(Jn&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),K&&K.parentNode&&K.parentNode.removeChild(K),(q===G||X&&X.lastPutMode!==`clone`)&&J&&J.parentNode&&J.parentNode.removeChild(J),W&&(this.nativeDraggable&&L(W,`dragend`,this),vr(W),W.style[`will-change`]=``,Jn&&!zn&&R(W,X?X.options.ghostClass:this.options.ghostClass,!1),R(W,this.options.chosenClass,!1),U({sortable:this,name:`unchoose`,toEl:G,newIndex:null,newDraggableIndex:null,originalEvent:e}),q===G?Y!==Fn&&Y>=0&&(U({sortable:this,name:`update`,toEl:G,originalEvent:e}),U({sortable:this,name:`sort`,toEl:G,originalEvent:e})):(Y>=0&&(U({rootEl:G,name:`add`,toEl:G,fromEl:q,originalEvent:e}),U({sortable:this,name:`remove`,toEl:G,originalEvent:e}),U({rootEl:G,name:`sort`,toEl:G,fromEl:q,originalEvent:e}),U({sortable:this,name:`sort`,toEl:G,originalEvent:e})),X&&X.save()),Q.active&&((Y==null||Y===-1)&&(Y=Fn,Ln=In),U({sortable:this,name:`end`,toEl:G,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){H(`nulling`,this),q=W=G=K=Mn=J=Nn=Pn=Hn=Un=Jn=Y=Ln=Fn=In=Yn=Xn=X=Rn=Q.dragged=Q.ghost=Q.clone=Q.active=null,nr.forEach(function(e){e.checked=!0}),nr.length=Wn=Gn=0},handleEvent:function(e){switch(e.type){case`drop`:case`dragend`:this._onDrop(e);break;case`dragenter`:case`dragover`:W&&(this._onDragOver(e),gr(e));break;case`selectstart`:e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,r=0,i=n.length,a=this.options;r<i;r++)t=n[r],rn(t,a.draggable,this.el,!1)&&e.push(t.getAttribute(a.dataIdAttr)||wr(t));return e},sort:function(e,t){var n={},r=this.el;this.toArray().forEach(function(e,t){var i=r.children[t];rn(i,this.options.draggable,r,!1)&&(n[e]=i)},this),t&&this.captureAnimationState(),e.forEach(function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return rn(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var r=kn.modifyOption(this,e,t);r===void 0?n[e]=t:n[e]=r,e===`group`&&dr(n)},destroy:function(){H(`destroy`,this);var e=this.el;e[V]=null,L(e,`mousedown`,this._onTapStart),L(e,`touchstart`,this._onTapStart),L(e,`pointerdown`,this._onTapStart),this.nativeDraggable&&(L(e,`dragover`,this),L(e,`dragenter`,this)),Array.prototype.forEach.call(e.querySelectorAll(`[draggable]`),function(e){e.removeAttribute(`draggable`)}),this._onDrop(),this._disableDelayedDragEvents(),Vn.splice(Vn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Pn){if(H(`hideClone`,this),Q.eventCanceled)return;z(J,`display`,`none`),this.options.removeCloneOnHide&&J.parentNode&&J.parentNode.removeChild(J),Pn=!0}},_showClone:function(e){if(e.lastPutMode!==`clone`){this._hideClone();return}if(Pn){if(H(`showClone`,this),Q.eventCanceled)return;W.parentNode==q&&!this.options.group.revertClone?q.insertBefore(J,W):Mn?q.insertBefore(J,Mn):q.appendChild(J),this.options.group.revertClone&&this.animate(W,J),z(J,`display`,``),Pn=!1}}};function gr(e){e.dataTransfer&&(e.dataTransfer.dropEffect=`move`),e.cancelable&&e.preventDefault()}function _r(e,t,n,r,i,a,o,s){var c,l=e[V],u=l.options.onMove,d;return window.CustomEvent&&!Jt&&!Yt?c=new CustomEvent(`move`,{bubbles:!0,cancelable:!0}):(c=document.createEvent(`Event`),c.initEvent(`move`,!0,!0)),c.to=t,c.from=e,c.dragged=n,c.draggedRect=r,c.related=i||t,c.relatedRect=a||B(t),c.willInsertAfter=s,c.originalEvent=o,e.dispatchEvent(c),u&&(d=u.call(l,c,o)),d}function vr(e){e.draggable=!1}function yr(){tr=!1}function br(e,t,n){var r=B(un(n.el,0,n.options,!0)),i=Cn(n.el,n.options,K),a=10;return t?e.clientX<i.left-a||e.clientY<r.top&&e.clientX<r.right:e.clientY<i.top-a||e.clientY<r.bottom&&e.clientX<r.left}function xr(e,t,n){var r=B(dn(n.el,n.options.draggable)),i=Cn(n.el,n.options,K),a=10;return t?e.clientX>i.right+a||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>i.bottom+a||e.clientX>r.right&&e.clientY>r.top}function Sr(e,t,n,r,i,a,o,s){var c=r?e.clientY:e.clientX,l=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!o){if(s&&$n<l*i){if(!Zn&&(Xn===1?c>u+l*a/2:c<d-l*a/2)&&(Zn=!0),Zn)f=!0;else if(Xn===1?c<u+$n:c>d-$n)return-Xn}else if(c>u+l*(1-i)/2&&c<d-l*(1-i)/2)return Cr(t)}return f||=o,f&&(c<u+l*a/2||c>d-l*a/2)?c>u+l/2?1:-1:0}function Cr(e){return fn(W)<fn(e)?1:-1}function wr(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function Tr(e){nr.length=0;for(var t=e.getElementsByTagName(`input`),n=t.length;n--;){var r=t[n];r.checked&&nr.push(r)}}function Er(e){return setTimeout(e,0)}function Dr(e){return clearTimeout(e)}rr&&I(document,`touchmove`,function(e){(Q.active||zn)&&e.cancelable&&e.preventDefault()}),Q.utils={on:I,off:L,css:z,find:sn,is:function(e,t){return!!rn(e,t,e,!1)},extend:gn,throttle:yn,closest:rn,toggleClass:R,clone:Sn,index:fn,nextTick:Er,cancelNextTick:Dr,detectDirection:cr,getChild:un},Q.get=function(e){return e[V]},Q.mount=function(){var e=[...arguments];e[0].constructor===Array&&(e=e[0]),e.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw`Sortable: Mounted plugin must be a constructor function, not ${{}.toString.call(e)}`;e.utils&&(Q.utils=Bt(Bt({},Q.utils),e.utils)),kn.mount(e)})},Q.create=function(e,t){return new Q(e,t)},Q.version=Kt;var $=[],Or,kr,Ar=!1,jr,Mr,Nr,Pr;function Fr(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)e.charAt(0)===`_`&&typeof this[e]==`function`&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?I(document,`dragover`,this._handleAutoScroll):this.options.supportPointer?I(document,`pointermove`,this._handleFallbackAutoScroll):t.touches?I(document,`touchmove`,this._handleFallbackAutoScroll):I(document,`mousemove`,this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?L(document,`dragover`,this._handleAutoScroll):(L(document,`pointermove`,this._handleFallbackAutoScroll),L(document,`touchmove`,this._handleFallbackAutoScroll),L(document,`mousemove`,this._handleFallbackAutoScroll)),Lr(),Ir(),bn()},nulling:function(){Nr=kr=Or=Ar=Pr=jr=Mr=null,$.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(r,i);if(Nr=e,t||this.options.forceAutoScrollFallback||Yt||Jt||Zt){Rr(e,this.options,a,t);var o=hn(a,!0);Ar&&(!Pr||r!==jr||i!==Mr)&&(Pr&&Lr(),Pr=setInterval(function(){var a=hn(document.elementFromPoint(r,i),!0);a!==o&&(o=a,Ir()),Rr(e,n.options,a,t)},10),jr=r,Mr=i)}else{if(!this.options.bubbleScroll||hn(a,!0)===cn()){Ir();return}Rr(e,this.options,hn(a,!1),!1)}}},Ut(e,{pluginName:`scroll`,initializeByDefault:!0})}function Ir(){$.forEach(function(e){clearInterval(e.pid)}),$=[]}function Lr(){clearInterval(Pr)}var Rr=yn(function(e,t,n,r){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,s=t.scrollSpeed,c=cn(),l=!1,u;kr!==n&&(kr=n,Ir(),Or=t.scroll,u=t.scrollFn,Or===!0&&(Or=hn(n,!0)));var d=0,f=Or;do{var p=f,m=B(p),h=m.top,g=m.bottom,_=m.left,v=m.right,y=m.width,b=m.height,x=void 0,S=void 0,C=p.scrollWidth,w=p.scrollHeight,T=z(p),E=p.scrollLeft,ee=p.scrollTop;p===c?(x=y<C&&(T.overflowX===`auto`||T.overflowX===`scroll`||T.overflowX===`visible`),S=b<w&&(T.overflowY===`auto`||T.overflowY===`scroll`||T.overflowY===`visible`)):(x=y<C&&(T.overflowX===`auto`||T.overflowX===`scroll`),S=b<w&&(T.overflowY===`auto`||T.overflowY===`scroll`));var D=x&&(Math.abs(v-i)<=o&&E+y<C)-(Math.abs(_-i)<=o&&!!E),te=S&&(Math.abs(g-a)<=o&&ee+b<w)-(Math.abs(h-a)<=o&&!!ee);if(!$[d])for(var ne=0;ne<=d;ne++)$[ne]||($[ne]={});($[d].vx!=D||$[d].vy!=te||$[d].el!==p)&&($[d].el=p,$[d].vx=D,$[d].vy=te,clearInterval($[d].pid),(D!=0||te!=0)&&(l=!0,$[d].pid=setInterval(function(){r&&this.layer===0&&Q.active._onTouchMove(Nr);var t=$[this.layer].vy?$[this.layer].vy*s:0,n=$[this.layer].vx?$[this.layer].vx*s:0;typeof u==`function`&&u.call(Q.dragged.parentNode[V],n,t,e,Nr,$[this.layer].el)!==`continue`||xn($[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==c&&(f=hn(f,!1)));Ar=l}},30),zr=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var c=n||i;o();var l=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(l.clientX,l.clientY);s(),c&&!c.el.contains(u)&&(a(`spill`),this.onSpill({dragEl:r,putSortable:n}))}};function Br(){}Br.prototype={startIndex:null,dragStart:function(e){this.startIndex=e.oldDraggableIndex},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=un(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:zr},Ut(Br,{pluginName:`revertOnSpill`});function Vr(){}Vr.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:zr},Ut(Vr,{pluginName:`removeOnSpill`}),Q.mount(new Fr),Q.mount(Vr,Br);function Hr(e){return e==null?e:JSON.parse(JSON.stringify(e))}function Ur(e){ce()&&ie(e)}function Wr(e){ce()?ae(e):j(e)}var Gr=null,Kr=null;function qr(e=null,t=null){Gr=e,Kr=t}function Jr(){return{data:Gr,clonedData:Kr}}var Yr=Symbol(`cloneElement`);function Xr(...e){let t=ce()?.proxy,n=null,r=e[0],[,i,a]=e;Array.isArray(M(i))||(a=i,i=null);let o=null,{immediate:s=!0,clone:c=Hr,customUpdate:l}=M(a)??{};function d(e){let{from:t,oldIndex:r,item:a}=e;n=Array.from(t.childNodes);let o=M(M(i)?.[r]),s=c(o);qr(o,s),a[Yr]=s}function f(e){let t=e.item[Yr];if(!Ot(t)){if(jt(e.item),p(i)){let n=[...M(i)];i.value=Dt(n,e.newDraggableIndex,t);return}Dt(M(i),e.newDraggableIndex,t)}}function m(e){let{from:t,item:n,oldIndex:r,oldDraggableIndex:a,pullMode:o,clone:s}=e;if(At(t,n,r),o===`clone`){jt(s);return}if(p(i)){let e=[...M(i)];i.value=Et(e,a);return}Et(M(i),a)}function h(e){if(l){l(e);return}let{from:t,item:n,oldIndex:r,oldDraggableIndex:a,newDraggableIndex:o}=e;if(jt(n),At(t,n,r),p(i)){let e=[...M(i)];i.value=Ct(e,a,o);return}Ct(M(i),a,o)}function g(e){let{newIndex:t,oldIndex:r,from:i,to:a}=e,o=null,s=t===r&&i===a;try{if(s){let e=null;n?.some((t,r)=>{if(e&&n?.length!==a.childNodes.length)return i.insertBefore(e,t.nextSibling),!0;let o=a.childNodes[r];e=a?.replaceChild(t,o)})}}catch(e){o=e}finally{n=null}j(()=>{if(qr(),o)throw o})}let _={onUpdate:h,onStart:d,onAdd:f,onRemove:m,onEnd:g};function v(e){let n=M(r);return e||=kt(n)?Mt(n,t?.$el):n,e&&!Ft(e)&&(e=e.$el),e||St(`Root element not found`),e}function y(){let e=M(a)??{},{immediate:t,clone:n}=e,r=yt(e,[`immediate`,`clone`]);return It(r,(e,t)=>{Lt(e)&&(r[e]=(e,...n)=>(Rt(e,Jr()),t(e,...n)))}),Pt(i===null?{}:_,r)}let b=e=>{e=v(e),o&&x.destroy(),o=new Q(e,y())};u(()=>a,()=>{o&&It(y(),(e,t)=>{o?.option(e,t)})},{deep:!0});let x={option:(e,t)=>o?.option(e,t),destroy:()=>{o?.destroy(),o=null},save:()=>o?.save(),toArray:()=>o?.toArray(),closest:(...e)=>o?.closest(...e)};return Wr(()=>{s&&b()}),Ur(x.destroy),vt({start:b,pause:()=>x?.option(`disabled`,!0),resume:()=>x?.option(`disabled`,!1)},x)}var Zr=[`update`,`start`,`add`,`remove`,`choose`,`unchoose`,`end`,`sort`,`filter`,`clone`,`move`,`change`],Qr=O({name:`VueDraggable`,model:{prop:`modelValue`,event:`update:modelValue`},props:[`clone`,`animation`,`ghostClass`,`group`,`sort`,`disabled`,`store`,`handle`,`draggable`,`swapThreshold`,`invertSwap`,`invertedSwapThreshold`,`removeCloneOnHide`,`direction`,`chosenClass`,`dragClass`,`ignore`,`filter`,`preventOnFilter`,`easing`,`setData`,`dropBubble`,`dragoverBubble`,`dataIdAttr`,`delay`,`delayOnTouchOnly`,`touchStartThreshold`,`forceFallback`,`fallbackClass`,`fallbackOnBody`,`fallbackTolerance`,`fallbackOffset`,`supportPointer`,`emptyInsertThreshold`,`scroll`,`forceAutoScrollFallback`,`scrollSensitivity`,`scrollSpeed`,`bubbleScroll`,`modelValue`,`tag`,`target`,`customUpdate`,...Zr.map(e=>`on${e.replace(/^\S/,e=>e.toUpperCase())}`)],emits:[`update:modelValue`,...Zr],setup(e,{slots:t,emit:n,expose:r,attrs:i}){let a=Zr.reduce((e,t)=>{let r=`on${t.replace(/^\S/,e=>e.toUpperCase())}`;return e[r]=(...e)=>n(t,...e),e},{}),o=g(()=>{let t=f(e),{modelValue:n}=t,r=yt(t,[`modelValue`]),o=Object.entries(r).reduce((e,[t,n])=>{let r=M(n);return r!==void 0&&(e[t]=r),e},{});return vt(vt({},a),Tt(vt(vt({},i),o)))}),s=g({get:()=>e.modelValue,set:e=>n(`update:modelValue`,e)}),c=x(),l=de(Xr(e.target||c,s,o));return r(l),()=>oe(e.tag||`div`,{ref:c},(t?.default)?.call(t,l))}}),$r={mounted:`mounted`,unmounted:`unmounted`};$r.mounted,$r.unmounted;var ei=[`width`,`height`],ti={key:0},ni=[`id`],ri=[`width`,`height`,`fill`],ii=[`width`,`height`,`fill`],ai=[`x`,`height`,`fill`],oi=[`width`,`height`,`fill`],si=[`x`,`height`,`fill`],ci=[`cx`,`cy`,`fill`],li=[`width`,`height`,`fill`],ui=A(O({__name:`ProgressBar`,props:{percentage:{},length:{},style:{},bgColor:{},progressColor:{},height:{}},setup(e){let t=e,n=g(()=>t.percentage<0?0:t.percentage>100?100:t.percentage),r=g(()=>t.length*9),i=g(()=>t.height||12),a=g(()=>n.value/100*r.value),o=g(()=>t.bgColor?t.bgColor:`rgb(51, 65, 85)`),s=g(()=>t.progressColor?t.progressColor:`rgb(34, 211, 238)`),c=g(()=>Math.floor(a.value/2)),l=g(()=>Math.floor(a.value/4)),u=g(()=>Math.floor(a.value/4)),d=g(()=>`gradient-${t.length}-${Date.now()}`);return(t,n)=>(k(),C(`svg`,{width:r.value,height:i.value,class:`progress-bar-svg`},[e.style===`smooth`?(k(),C(`defs`,ti,[N(`linearGradient`,{id:d.value,x1:`0%`,y1:`0%`,x2:`100%`,y2:`0%`},[N(`stop`,{offset:`0%`,style:E(`stop-color:${s.value};stop-opacity:0.8`)},null,4),N(`stop`,{offset:`100%`,style:E(`stop-color:${s.value};stop-opacity:1`)},null,4)],8,ni)])):T(``,!0),N(`rect`,{x:`0`,y:`0`,width:r.value,height:i.value,rx:`2`,fill:o.value,opacity:`0.3`},null,8,ri),e.style===`block`?(k(),C(`rect`,{key:1,x:`0`,y:`0`,width:a.value,height:i.value,rx:`2`,fill:s.value},null,8,ii)):e.style===`thin`?(k(!0),C(S,{key:2},P(c.value,e=>(k(),C(`rect`,{key:e,x:(e-1)*2,y:`0`,width:`1.5`,height:i.value,fill:s.value},null,8,ai))),128)):e.style===`smooth`?(k(),C(`rect`,{key:3,x:`0`,y:`0`,width:a.value,height:i.value,rx:`2`,fill:`url(#${d.value})`},null,8,oi)):e.style===`bar`?(k(!0),C(S,{key:4},P(l.value,e=>(k(),C(`rect`,{key:e,x:(e-1)*4,y:`0`,width:`3`,height:i.value,fill:s.value},null,8,si))),128)):e.style===`dot`?(k(!0),C(S,{key:5},P(u.value,e=>(k(),C(`circle`,{key:e,cx:(e-1)*4+2,cy:i.value/2,r:`2`,fill:s.value},null,8,ci))),128)):(k(),C(`rect`,{key:6,x:`0`,y:`0`,width:a.value,height:i.value,rx:`2`,fill:s.value},null,8,li))],8,ei))}}),[[`__scopeId`,`data-v-4c037c42`]]),di={class:`bg-white border rounded-xl p-5 flex flex-col shadow-sm hover:shadow-md transition-shadow min-h-[200px]`},fi=[`onClick`],pi={key:0},mi={key:2},hi=[`onClick`],gi={key:0},_i={key:2},vi={key:1,class:`flex flex-col items-center justify-center w-full py-8 text-center`},yi=A(O({__name:`StatusLinePreview`,props:{modules:{},currentStyle:{},selectedIndex:{},showIcon:{type:Boolean},renderModulePreview:{type:Function}},emits:[`update:selected`,`reorder`,`update:modules`],setup(e,{emit:t}){let n=e,r=t,i=g({get:()=>n.modules,set:e=>r(`update:modules`,e)});return(e,t)=>(k(),C(`div`,di,[t[3]||=N(`div`,{class:`flex items-center justify-between mb-4 shrink-0`},[N(`h3`,{class:`text-sm font-semibold text-slate-900`},`é¢„è§ˆ`)],-1),N(`div`,{class:w([`rounded-lg bg-slate-900 text-white font-mono text-sm overflow-x-auto flex items-start justify-start border border-slate-800/50 p-4 shadow-inner min-h-[144px] ring-1 ring-slate-800/20`,n.currentStyle===`powerline`?`gap-0 p-0 items-start relative min-h-[28px]`:`gap-1 items-start min-h-[20px]`])},[i.value.length>0?(k(),h(M(Qr),{key:0,modelValue:i.value,"onUpdate:modelValue":t[0]||=e=>i.value=e,animation:200,"item-key":(e,t)=>t,class:`flex items-center flex-wrap gap-2`,"ghost-class":`drag-ghost`,"chosen-class":`drag-chosen`,"drag-class":`dragging`,onEnd:t[1]||=e=>r(`reorder`)},{default:l(()=>[n.currentStyle===`powerline`?(k(!0),C(S,{key:0},P(i.value,(e,t)=>(k(),C(`div`,{key:t,class:w([`powerline-module px-4 cursor-pointer transition-all relative group`,[n.renderModulePreview(e,!0)?.bgColorClass||``,n.renderModulePreview(e,!0)?.textColorClass||`text-white`,n.selectedIndex===t?`shadow-md shadow-indigo-500/30 scale-[1.01] z-10`:`hover:shadow-sm hover:brightness-110`]]),style:E({...n.renderModulePreview(e,!0)?.bgColorStyle}),onClick:e=>r(`update:selected`,t)},[N(`div`,{class:`powerline-module-content`,style:E({...n.renderModulePreview(e,!0)?.textColorStyle})},[n.showIcon&&n.renderModulePreview(e,!0)?.icon?(k(),C(`span`,pi,_(n.renderModulePreview(e,!0)?.icon),1)):T(``,!0),n.renderModulePreview(e,!0)?.isProgress?(k(),h(ui,{key:1,percentage:n.renderModulePreview(e,!0)?.percentage??0,length:n.renderModulePreview(e,!0)?.progressLength??20,style:E(n.renderModulePreview(e,!0)?.progressStyle??`block`),"bg-color":n.renderModulePreview(e,!0)?.bgColor,"progress-color":n.renderModulePreview(e,!0)?.progressColor,height:14},null,8,[`percentage`,`length`,`style`,`bg-color`,`progress-color`])):(k(),C(`span`,mi,_(n.renderModulePreview(e,!0)?.text),1))],4),t<i.value.length-1?(k(),C(`div`,{key:0,class:`powerline-separator`,style:E({borderLeftColor:n.renderModulePreview(e,!0)?.borderLeftColor||`#374151`})},null,4)):T(``,!0)],14,fi))),128)):(k(!0),C(S,{key:1},P(i.value,(e,t)=>(k(),C(`div`,{key:t,class:w([`flex items-center gap-2 px-3 py-1.5 rounded-md cursor-pointer transition-all group`,[n.renderModulePreview(e,!1)?.textClass||``,n.selectedIndex===t?`bg-white/25 shadow-md shadow-indigo-500/20`:`hover:bg-white/15`]]),style:E(n.renderModulePreview(e,!1)?.textStyle),onClick:e=>r(`update:selected`,t)},[n.showIcon&&n.renderModulePreview(e,!1)?.icon?(k(),C(`span`,gi,_(n.renderModulePreview(e,!1)?.icon),1)):T(``,!0),n.renderModulePreview(e,!1)?.isProgress?(k(),h(ui,{key:1,percentage:n.renderModulePreview(e,!1)?.percentage??0,length:n.renderModulePreview(e,!1)?.progressLength??20,style:E(n.renderModulePreview(e,!1)?.progressStyle??`block`),"bg-color":n.renderModulePreview(e,!1)?.bgColor,"progress-color":n.renderModulePreview(e,!1)?.progressColor,height:12},null,8,[`percentage`,`length`,`style`,`bg-color`,`progress-color`])):(k(),C(`span`,_i,_(n.renderModulePreview(e,!1)?.text),1))],14,hi))),128))]),_:1},8,[`modelValue`,`item-key`])):(k(),C(`div`,vi,[...t[2]||=[N(`div`,{class:`w-12 h-12 rounded-full bg-slate-800/50 flex items-center justify-center mb-3`},[N(`svg`,{class:`w-5 h-5 text-slate-400`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`},[N(`path`,{d:`M12 5v14m-7-7h14`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`})])],-1),N(`span`,{class:`text-sm text-slate-400 font-medium`},`ç‚¹å‡»ä¸‹æ–¹ç»„ä»¶æ·»åŠ æ¨¡å—`,-1)]]))],2)]))}}),[[`__scopeId`,`data-v-aa3fd8b5`]]),bi={class:`bg-white border rounded-xl flex flex-col shadow-sm hover:shadow-md transition-shadow min-h-[200px]`},xi={class:`px-3 py-3`},Si={class:`grid grid-cols-2 gap-2`},Ci=[`onClick`],wi={class:`w-6 h-6 rounded-md bg-indigo-100 group-hover:bg-indigo-200 flex items-center justify-center shrink-0 transition-colors`},Ti={class:`text-xs font-medium text-slate-700 group-hover:text-indigo-900 transition-colors`},Ei=O({__name:`ModulePalette`,emits:[`add`],setup(t,{emit:n}){let r=n,i=[{label:`å·¥ä½œç›®å½•`,value:`workDir`},{label:`Gitåˆ†æ”¯`,value:`gitBranch`},{label:`æ¨¡åž‹`,value:`model`},{label:`ä½¿ç”¨é‡`,value:`usage`},{label:`è¿›åº¦æ¡`,value:`progress`},{label:`è„šæœ¬`,value:`script`},{label:`åˆ†å‰²çº¿`,value:`separator`}];return(t,n)=>(k(),C(`div`,bi,[n[0]||=N(`div`,{class:`px-4 pt-3 pb-2.5 border-b border-slate-100 shrink-0`},[N(`h3`,{class:`text-sm font-semibold text-slate-900`},`å¯ç”¨ç»„ä»¶`),N(`p`,{class:`text-xs text-slate-500 mt-0.5`},`ç‚¹å‡»ç»„ä»¶æ·»åŠ åˆ°çŠ¶æ€æ `)],-1),N(`div`,xi,[N(`div`,Si,[(k(),C(S,null,P(i,t=>N(`div`,{key:t.value,class:`group flex items-center gap-2 p-2 border border-slate-200 rounded-md cursor-pointer bg-white hover:bg-indigo-50/50 hover:border-indigo-300 hover:shadow-sm transition-all`,onClick:e=>r(`add`,t.value)},[N(`div`,wi,[c(M(e),{class:`w-3.5 h-3.5 text-indigo-600`})]),N(`span`,Ti,_(t.label),1)],8,Ci)),64))])])]))}}),Di={key:0,class:`flex items-center justify-center p-8`},Oi={key:1,class:`grid gap-2`,style:{"grid-template-columns":`repeat(auto-fit, minmax(35px, 1fr))`}},ki=[`title`,`onClick`],Ai={key:0,class:`leading-none`},ji={key:1,class:`text-[10px] text-slate-400 leading-none`},Mi={key:2,class:`flex flex-col items-center justify-center p-8 text-slate-400`},Ni={class:`text-sm`},Pi=O({__name:`IconSearchInput`,props:{modelValue:{}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=`ðŸ˜€.ðŸ˜ƒ.ðŸ˜„.ðŸ˜.ðŸ˜†.ðŸ˜….ðŸ˜‚.ðŸ¤£.ðŸ¥².ðŸ˜Š.ðŸ˜‡.ðŸ™‚.ðŸ˜‰.ðŸ˜Œ.ðŸ˜.ðŸ˜˜.ðŸ˜—.ðŸ˜™.ðŸ˜š.ðŸ˜‹.ðŸ˜›.ðŸ˜œ.ðŸ¤ª.ðŸ˜.ðŸ¤—.ðŸ¤­.ðŸ¤«.ðŸ¤”.ðŸ«¡.ðŸ˜®.ðŸ˜´.ðŸ¤’.ðŸ¤•.ðŸ¤¯.ðŸ¥³.ðŸ˜Ž.ðŸŽ.ðŸŠ.ðŸ‹.ðŸŒ.ðŸ‰.ðŸ‡.ðŸ“.ðŸ¥.ðŸ….ðŸ†.ðŸŒ¶ï¸.ðŸŒ½.ðŸ„.ðŸŒ°.ðŸž.ðŸ¥.ðŸ¥¨.ðŸ¥¯.ðŸ§‡.ðŸ§€.ðŸ¥©.ðŸ—.ðŸ”.ðŸŸ.ðŸ•.ðŸŒ­.ðŸ¥ª.ðŸŒ®.ðŸŒ¯.ðŸœ.ðŸ².ðŸ›.ðŸ£.ðŸ¤.ðŸš.ðŸ™.ðŸŽ‚.ðŸ°.ðŸ§.ðŸ©.ðŸª.ðŸ¬.ðŸ­.ðŸ«.ðŸ¯.ðŸ¥›.â˜•.ðŸµ.ðŸº.ðŸ¥‚.ðŸ¾.ðŸ·.ðŸ¹.ðŸ¸.ðŸ§‰.ðŸ§Š.ðŸ¥„.ðŸ´.ðŸ½ï¸.ðŸ¥¡.ðŸ .ðŸ¢.ðŸ­.ðŸ¥.ðŸ¦.ðŸ¨.ðŸ«.ðŸ¬.ðŸŸï¸.ðŸ—¼.ðŸ—½.ðŸ•Œ.â›ª.ðŸ•.â›©ï¸.ðŸ•‹.â›².â›º.ðŸžï¸.ðŸŒ….ðŸŒ„.ðŸŒ‡.ðŸŒ‰.ðŸŒƒ.ðŸš—.ðŸš•.ðŸš™.ðŸšŒ.ðŸšŽ.ðŸŽï¸.ðŸš“.ðŸš‘.ðŸš’.ðŸš.ðŸ›».ðŸšš.ðŸš¢.âœˆï¸.ðŸš€.ðŸ›°ï¸.ðŸš.ðŸš‚.ðŸš†.ðŸš‡.ðŸšŠ.ðŸš‹.ðŸš².ðŸ›´.ðŸš¦.ðŸš§.ðŸš¨.â›½.ðŸ—ºï¸.ðŸ“.ðŸ§­.âš“.ðŸ›Ÿ.â›µ.ðŸ›¶.ðŸš¤.â­.âœ¨.ðŸ”¥.ðŸŒˆ.â˜€ï¸.ðŸŒ™.ðŸŒ§ï¸.âš¡.â„ï¸.ðŸŒŠ.ðŸ””.ðŸ’¡.â¤ï¸.ðŸ§¡.ðŸ’›.ðŸ’š.ðŸ’™.ðŸ’œ.ðŸ¤Ž.ðŸ–¤.ðŸ¤.ðŸ’”.ðŸ’¯.âœ….â“.â—.â„¹ï¸.âž•.âž–.âœ–ï¸.âž—.ðŸ”—.ðŸ”’.ðŸ”‘.â™»ï¸.â˜¢ï¸.âš ï¸.ðŸ›‘.ðŸš«.ðŸ…¿ï¸.â™¿.ðŸˆ³.ðŸˆ¶.ðŸˆš.ðŸˆ¸.ãŠ™ï¸.ãŠ—ï¸.ðŸ‰.ðŸ’°.ðŸ’³.ðŸ’±.ðŸ’².ðŸ§¾.ðŸª™.âš–ï¸.ðŸ“….ðŸ—“ï¸.ðŸ“†.ðŸ“.ðŸ“„.ðŸ“.âœï¸.ðŸ–ï¸.ðŸ–Œï¸.âœ‚ï¸.ðŸ“Œ.ðŸ“Ž.ðŸ“.ðŸ“.ðŸ“˜.ðŸ“—.ðŸ“™.ðŸ“š.ðŸ“–.ðŸ“°.ðŸ”–.ðŸ·ï¸.ðŸ“£.ðŸ“¢.ðŸŽ™ï¸.ðŸŽ§.ðŸ“».ðŸ“¹.ðŸ“·.ðŸ’».ðŸ“±.âŒš.ðŸ“º.ðŸ–±ï¸.ðŸ’¿.ðŸ’¾.ðŸ’½.ðŸŒ.ðŸ“§.ðŸ“¥.ðŸ“¤.ðŸ•.ðŸˆ.ðŸ’.ðŸ˜.ðŸ….ðŸŸ.ðŸ¢.ðŸ.ðŸ¥.ðŸ¦‰.ðŸ¦‹.ðŸž.ðŸ».ðŸ¼.ðŸ¦Š.ðŸ¦.ðŸ´.ðŸ¦Œ.ðŸ¦….ðŸ¦¢.ðŸ¬.ðŸ³.ðŸ¦€.ðŸ¦.ðŸŒ´.ðŸŒ².ðŸŒ³.ðŸŒ¿.â˜˜ï¸.ðŸŒ¾.ðŸŒ¸.ðŸŒ·.ðŸŒ¹.ðŸŒ».ðŸŒ¼.ðŸŒµ.âš½.ðŸ€.ðŸˆ.ðŸŽ¾.ðŸŽ².ðŸ§©.ðŸŽ®.ðŸ•¹ï¸.ðŸŽ¯.ðŸŽ±.ðŸŽ³.â›¸ï¸.â›·ï¸.ðŸ‚.ðŸ„.ðŸš£.ðŸŠ.ðŸ‹ï¸.ðŸƒ.ðŸš¶.ðŸ’ƒ.ðŸ§—.ðŸ§˜.ðŸŽ¤.ðŸ‘.ðŸ‘Ž.ðŸ‘.ðŸ™.ðŸ‘€.ðŸ‘¤.ðŸ‘¥.ðŸ«‚.ðŸ–ï¸.âœŠ.ðŸ¤ž.ðŸ¤Ÿ.ðŸ¤˜.ðŸ¤™.ðŸ¤š.ðŸ¤›.ðŸ¤œ.â˜ï¸.ðŸ‘‡.ðŸ‘ˆ.ðŸ‘‰.ðŸ‘†.â¬‡ï¸.âž¡ï¸`.split(`.`),r=e,i=t,a=x(r.modelValue||``),o=x(!1),s=x([]),l=x([]),d=x(!1),f=x(``),p=x(null),m=g(()=>p.value?.querySelector(`input`)),h=x(null);u(()=>r.modelValue,e=>{a.value=e||``,f.value=e||``},{immediate:!0}),u(a,e=>{i(`update:modelValue`,e)});async function v(){if(s.value.length>0)return;d.value=!0;let e=n.filter(e=>!!e&&e.trim()!==``).map((e,t)=>{let n=e.codePointAt(0),r=n?n.toString(16).toUpperCase():``;return{id:`${r}-${t}`,unicode:r,char:e}});s.value=e,l.value=e,d.value=!1}u(s,()=>{l.value=s.value},{immediate:!0});function b(e){let t=e.target.value;a.value=t,f.value=t,s.value.length===0&&v()}function T(e){let t=e.clipboardData?.getData(`text`);t&&t.length===1&&(a.value=t,f.value=t)}function E(){i(`update:modelValue`,a.value),o.value=!1,j(()=>{m.value?.blur()})}function ee(e){a.value=e,f.value=e,i(`update:modelValue`,e),o.value=!1,j(()=>{m.value?.blur()})}function D(){o.value=!o.value}function te(){o.value=!0,s.value.length===0&&v()}function ne(e){let t=e.relatedTarget;t&&h.value?.contains(t)||setTimeout(()=>{h.value?.contains(document.activeElement)||(o.value=!1)},0)}return ae(()=>{v()}),_e(h,()=>{o.value=!1}),(e,t)=>(k(),C(`div`,{ref_key:`containerRef`,ref:h,class:`relative w-full`},[N(`div`,{ref_key:`inputWrapperRef`,ref:p,class:`relative flex items-center text-2xl`},[c(Pe,{"model-value":a.value,class:`h-12 pr-10 flex-1`,placeholder:`è¾“å…¥æˆ–ç²˜è´´å›¾æ ‡...`,onInput:b,onFocus:te,onBlur:ne,onPaste:T,onKeydown:y(F(E,[`prevent`]),[`enter`])},null,8,[`model-value`,`onKeydown`]),N(`button`,{type:`button`,class:`absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 transition-colors focus:outline-none`,onClick:F(D,[`stop`])},[(k(),C(`svg`,{class:w([`w-5 h-5 transform transition-transform duration-200`,{"rotate-180":o.value}]),xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 20 20`,fill:`currentColor`},[...t[1]||=[N(`path`,{"fill-rule":`evenodd`,d:`M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z`,"clip-rule":`evenodd`},null,-1)]],2))])],512),N(`div`,{class:w([`absolute z-10 mt-2 w-full bg-white rounded-lg shadow-xl border border-gray-200 p-2 max-h-96 overflow-y-auto transform origin-top transition-transform duration-200`,o.value?`scale-y-100 opacity-100`:`scale-y-0 opacity-0 pointer-events-none`]),"aria-expanded":`false`,"aria-hidden":`true`},[d.value?(k(),C(`div`,Di,[...t[2]||=[N(`div`,{class:`h-6 w-6 animate-spin rounded-full border-4 border-primary border-t-transparent`},null,-1),N(`span`,{class:`ml-2 text-sm text-slate-500`},`åŠ è½½å›¾æ ‡ä¸­...`,-1)]])):l.value.length>0?(k(),C(`div`,Oi,[(k(!0),C(S,null,P(l.value,e=>(k(),C(`div`,{key:e.id,class:`flex items-center justify-center p-2 min-w-[48px] h-12 aspect-square cursor-pointer text-2xl rounded-md hover:bg-blue-100 transition duration-100 ease-in-out`,title:`U+${e.unicode}`,onMousedown:t[0]||=F(()=>{},[`prevent`]),onClick:t=>ee(e.char)},[e.char&&e.char.trim()!==``&&e.char!==`â€‚`?(k(),C(`span`,Ai,_(e.char),1)):(k(),C(`span`,ji,`U+`+_(e.unicode),1))],40,ki))),128))])):(k(),C(`div`,Mi,[t[3]||=N(`svg`,{width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,class:`mb-2`},[N(`circle`,{cx:`11`,cy:`11`,r:`8`}),N(`path`,{d:`m21 21-4.35-4.35`})],-1),N(`div`,Ni,_(f.value?`æœªæ‰¾åˆ°å›¾æ ‡ "${f.value}"`:d.value?`åŠ è½½ä¸­...`:`æš‚æ— å¯ç”¨å›¾æ ‡`),1)]))],2)],512))}}),Fi={class:`flex-1 text-left text-sm text-slate-700 font-mono`},Ii={class:`p-4 space-y-4`},Li={class:`flex items-center gap-4`},Ri={class:`space-y-2 flex-1`},zi=[`value`],Bi={class:`space-y-2 flex-1`},Vi={class:`w-full truncate h-9 rounded border border-slate-300 p-2 font-mono`},Hi={key:0,class:`space-y-2`},Ui={class:`flex flex-wrap gap-1.5`},Wi=[`onClick`,`title`],Gi=O({__name:`ColorPicker`,props:{modelValue:{},options:{},placeholder:{}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,i=x(!1),a=x(``),o=x(null),s=[{label:`é»‘è‰²`,value:`rgb(0, 0, 0)`},{label:`ç™½è‰²`,value:`rgb(255, 255, 255)`},{label:`çº¢è‰²`,value:`rgb(220, 38, 38)`},{label:`ç»¿è‰²`,value:`rgb(22, 163, 74)`},{label:`è“è‰²`,value:`rgb(59, 130, 246)`},{label:`é»„è‰²`,value:`rgb(234, 179, 8)`},{label:`ç´«è‰²`,value:`rgb(168, 85, 247)`},{label:`é’è‰²`,value:`rgb(6, 182, 212)`},{label:`æ©™è‰²`,value:`rgb(251, 146, 60)`},{label:`ç²‰è‰²`,value:`rgb(236, 72, 153)`},{label:`æ£•è‰²`,value:`rgb(154, 52, 18)`},{label:`ç°è‰²`,value:`rgb(107, 114, 128)`},{label:`äº®çº¢`,value:`rgb(248, 113, 113)`},{label:`äº®ç»¿`,value:`rgb(74, 222, 128)`},{label:`äº®è“`,value:`rgb(147, 197, 253)`},{label:`äº®é»„`,value:`rgb(253, 224, 71)`}],c=g(()=>n.options&&n.options.length>0?n.options:s);function d(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return!t||!t[1]||!t[2]||!t[3]?`rgb(0, 0, 0)`:`rgb(${parseInt(t[1],16)}, ${parseInt(t[2],16)}, ${parseInt(t[3],16)})`}function f(e){let t=e.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i);return!t||!t[1]||!t[2]||!t[3]?`#000000`:`#${parseInt(t[1],10).toString(16).padStart(2,`0`)}${parseInt(t[2],10).toString(16).padStart(2,`0`)}${parseInt(t[3],10).toString(16).padStart(2,`0`)}`}function p(e){return/^rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/i.test(e)}function m(e){if(p(e))return e;if(Qe(e))return d(e);let t=n.options?.find(t=>t.value===e);if(t?.value&&Qe(t.value))return d(t.value);if(t?.value&&p(t.value))return t.value;if(t?.colorStyle?.backgroundColor){let e=t.colorStyle.backgroundColor;if(Qe(e))return d(e);if(p(e))return e}return`rgb(0, 0, 0)`}let v=g(()=>n.modelValue?m(n.modelValue):n.placeholder||`æœªé€‰æ‹©é¢œè‰²`),y=g(()=>n.modelValue?f(m(n.modelValue)):`#ffffff`),b=g(()=>!n.modelValue||Qe(n.modelValue)||p(n.modelValue)?``:n.options?.find(e=>e.value===n.modelValue)?.colorClass||``);u(i,e=>{e&&n.modelValue?a.value=m(n.modelValue):a.value=``});let ee=e=>{let t=e.target.value;r(`update:modelValue`,d(t))},D=e=>{let t,n=e.value;if(Qe(n))t=d(n);else if(p(n))t=n;else if(e.colorStyle?.backgroundColor){let n=e.colorStyle.backgroundColor;t=Qe(n)?d(n):p(n)?n:`rgb(0, 0, 0)`}else t=`rgb(0, 0, 0)`;r(`update:modelValue`,t),i.value=!1},te=e=>n.modelValue?m(n.modelValue)===m(e.value):!1,ne=()=>{r(`update:modelValue`,null),i.value=!1},O=()=>{i.value=!0,setTimeout(()=>{o.value?.focus()},100)};return(e,t)=>(k(),h(Fe,{show:i.value,"onUpdate:show":t[0]||=e=>i.value=e,"min-width":280,position:`top`},{trigger:l(()=>[N(`button`,{type:`button`,class:`w-full flex items-center gap-3 px-3 py-2 border border-slate-300 rounded-md bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors`,onClick:O},[N(`span`,{class:w([`w-6 h-6 rounded-md border border-slate-300 shrink-0`,b.value]),style:E(b.value?{}:{backgroundColor:y.value})},null,6),N(`span`,Fi,_(v.value),1),(k(),C(`svg`,{class:w([`w-4 h-4 text-slate-400 shrink-0 transition-transform`,{"rotate-180":i.value}]),fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`},[...t[1]||=[N(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 9l-7 7-7-7`},null,-1)]],2))])]),default:l(()=>[N(`div`,Ii,[N(`div`,{class:`flex items-center justify-between`},[t[2]||=N(`h4`,{class:`text-sm font-semibold text-slate-700`},`é€‰æ‹©é¢œè‰²`,-1),N(`button`,{type:`button`,class:`text-xs text-slate-500 hover:text-slate-700 px-2 py-1 rounded hover:bg-slate-100 transition-colors`,onClick:ne},` æ¸…é™¤ `)]),N(`div`,Li,[N(`div`,Ri,[t[3]||=N(`label`,{class:`text-xs font-medium text-slate-600`},`è°ƒè‰²ç›˜`,-1),N(`input`,{ref_key:`colorInputRef`,ref:o,type:`color`,value:y.value,class:`w-full h-10 rounded border border-slate-300 cursor-pointer`,onInput:ee},null,40,zi)]),N(`div`,Bi,[t[4]||=N(`label`,{class:`text-xs font-medium text-slate-600`},`é¢œè‰²`,-1),N(`div`,Vi,_(y.value),1)])]),c.value.length>0?(k(),C(`div`,Hi,[t[5]||=N(`label`,{class:`text-xs font-medium text-slate-600`},`é¢„è®¾é¢œè‰²`,-1),N(`div`,Ui,[(k(!0),C(S,null,P(c.value,e=>(k(),C(`button`,{key:e.value,type:`button`,class:`inline-block cursor-pointer hover:opacity-80 transition-opacity rounded`,style:E({width:`24px`,height:`24px`,border:te(e)?`2px solid #6366f1`:`1px solid #e5e7eb`,boxSizing:`border-box`,backgroundColor:(()=>{let t=e.value;return p(t)||M(Qe)(t)?t:e.colorStyle?.backgroundColor||`#ffffff`})()}),onClick:F(t=>D(e),[`stop`]),title:e.label},null,12,Wi))),128))])])):T(``,!0)])]),_:1},8,[`show`]))}}),Ki=[`title`],qi={class:`flex-1 text-left truncate`},Ji={key:0,class:`w-3.5 h-3.5 text-indigo-600 shrink-0`,fill:`currentColor`,viewBox:`0 0 20 20`},Yi=O({__name:`StyleButton`,props:{value:{},label:{},description:{},isSelected:{type:Boolean}},emits:[`click`],setup(e){return(t,n)=>(k(),C(`button`,{type:`button`,class:w([`flex items-center gap-2 px-3 py-2.5 text-xs font-medium rounded-lg border transition-all min-w-0`,`hover:shadow-sm active:scale-[0.98]`,e.isSelected?`bg-indigo-50 border-indigo-300 text-indigo-700 shadow-sm`:`bg-white border-slate-200 text-slate-700 hover:bg-slate-50 hover:border-slate-300`]),title:e.description,onClick:n[0]||=n=>t.$emit(`click`,e.value)},[ue(t.$slots,`icon`),N(`span`,qi,_(e.label),1),e.isSelected?(k(),C(`svg`,Ji,[...n[1]||=[N(`path`,{"fill-rule":`evenodd`,d:`M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z`,"clip-rule":`evenodd`},null,-1)]])):T(``,!0)],10,Ki))}});function Xi(){return new Oe({nodes:{doc:{content:`inline*`},text:{inline:!0,group:`inline`},hard_break:{inline:!0,group:`inline`,selectable:!1,parseDOM:[{tag:`br`}],toDOM(){return[`br`]}}},marks:{variable:{attrs:{reference:{default:``}},parseDOM:[{tag:`span.variable-token`,getAttrs(e){return{reference:e.getAttribute(`data-reference`)||``}}}],toDOM(){return[`span`,{class:`variable-token`,style:`color: #10b981; background-color: #ecfdf5; padding: 0 2px; border-radius: 2px;`}]}}}})}function Zi(e,t){let n=e.nodes.hard_break,r=t.replace(/\r\n?/g,`
`),i=[];if(r.length>0){let t=r.split(`
`);t.forEach((r,a)=>{r.length>0&&i.push(e.text(r)),a<t.length-1&&n&&i.push(n.create())})}return e.node(`doc`,void 0,i)}function Qi(e){let t=[],n=/\{\{\s*[^{}]+?\s*\}\}/g;return e.nodesBetween(0,e.content.size,(e,r)=>{if(e.isText){let i=e.text||``,a;for(n.lastIndex=0;(a=n.exec(i))!==null;){let e=r+a.index,n=e+a[0].length;t.push(De.inline(e,n,{class:`variable-token`}))}}}),t}function $i(){return new Me({key:new xe(`variableHighlight`),state:{init(e){let t=Qi(e.doc);return Ae.create(e.doc,t)},apply(e,t,n,r){let i=Qi(r.doc);return Ae.create(r.doc,i)}},props:{decorations(e){return this.getState(e)}}})}function ea(e,t=[`{`,`[`]){let n=new Set(t);return new Me({key:new xe(`variableAutocomplete`),props:{handleTextInput(t,r,i,a){for(let t of a)if(n.has(t)){let n=a.indexOf(t);setTimeout(()=>{e(r+n,t)},10);break}return!1},handleKeyDown(t,r){if(n.has(r.key)&&!r.ctrlKey&&!r.metaKey&&!r.altKey){let{state:n}=t,{from:i}=n.selection;setTimeout(()=>{e(i-1,r.key)},10)}return!1}}})}function ta(){let e=/\{\{\s*[^{}]+?\s*\}\}/g;function t(t){let n=[];return t.nodesBetween(0,t.content.size,(t,r)=>{if(!t.isText)return;let i=t.text||``,a;for(e.lastIndex=0;(a=e.exec(i))!==null;){let e=r+a.index,t=e+a[0].length;n.push({from:e,to:t})}}),n}return new Me({key:new xe(`variableDeletion`),props:{handleKeyDown(e,n){if(n.key!==`Backspace`&&n.key!==`Delete`)return!1;let{state:r,dispatch:i}=e,{from:a,to:o,empty:s}=r.selection,c=r.doc,l=t(c);if(!s){let e=a,t=o;for(let n of l)n.from<t&&n.to>e&&(n.from<e&&(e=n.from),n.to>t&&(t=n.to));return e!==a||t!==o?(n.preventDefault(),i(r.tr.delete(e,t).scrollIntoView()),!0):!1}let u=a,d=null;for(let e of l){let t=n.key===`Backspace`&&u>e.from&&u<=e.to,r=n.key===`Delete`&&u>=e.from&&u<e.to;if(t||r){d=e;break}}return d?(n.preventDefault(),i(r.tr.delete(d.from,d.to).scrollIntoView()),!0):!1}}})}function na(e,t=``,n){let r=Zi(e,t),i=e.nodes.hard_break,a={...Ce,"Mod-z":ke,"Mod-y":Ee,"Mod-Shift-z":Ee,...n?.multiline?{Enter:(e,t)=>!t||!i?!1:(t(e.tr.replaceSelectionWith(i.create()).scrollIntoView()),!0)}:{Enter:()=>!0}},o=[je(),$i(),ta(),ye(a)];return n?.onAutocompleteTrigger&&o.push(ea(n.onAutocompleteTrigger,n.autocompleteTriggerChars)),we.create({doc:r,plugins:o})}function ra(e){let t=``;return e.doc.descendants(e=>{e.isText?t+=e.text||``:e.type.name===`hard_break`&&(t+=`
`)}),t}function ia(e,t,n){let r=Zi(t,n);return e.apply(e.tr.replaceWith(0,e.doc.content.size,r.content))}var aa=A(O({__name:`VariableEditor`,props:{modelValue:{default:``},placeholder:{default:``},multiline:{type:Boolean,default:!1},density:{default:`default`},readonly:{type:Boolean,default:!1},autocompleteTriggerChars:{}},emits:[`update:modelValue`,`focus`,`blur`,`variable-drop`,`autocomplete-trigger`],setup(e,{expose:t,emit:n}){let r=e,i=n,a=x(null),o=x(!1),s=null,c=Xi(),l=!1;function d(){if(!a.value)return;let e=na(c,r.modelValue,{multiline:r.multiline,onAutocompleteTrigger:(e,t)=>{i(`autocomplete-trigger`,e,t)},autocompleteTriggerChars:r.autocompleteTriggerChars});s=new be(a.value,{state:e,dispatchTransaction(e){if(!s)return;let t=s.state.apply(e);s.updateState(t),l||i(`update:modelValue`,ra(t))},attributes:{class:`ProseMirror variable-scroll-x`,style:`
        outline: none;
        border: none;
        padding: ${r.density===`compact`?`0.25rem 0.5rem`:`0.5rem`};
        font-family: 'Fira Code', 'Courier New', 'Microsoft YaHei', 'SimHei', monospace;
        font-size: ${r.density===`compact`?`0.75rem`:`0.875rem`};
        line-height: 1.5;
        min-height: ${r.multiline?r.density===`compact`?`3rem`:`4rem`:`auto`};
        max-height: ${r.multiline?`15rem`:`auto`};
        overflow-y: ${r.multiline?`auto`:`hidden`};
        white-space: ${r.multiline?`pre-wrap`:`nowrap`};
        word-wrap: break-word;
      `},editable:()=>!r.readonly}),s.dom.addEventListener(`focus`,p),s.dom.addEventListener(`blur`,m),s.dom.addEventListener(`variable-drop`,h),g()}function f(){s&&=(s.dom.removeEventListener(`focus`,p),s.dom.removeEventListener(`blur`,m),s.dom.removeEventListener(`variable-drop`,h),s.destroy(),null)}function p(){o.value=!0,i(`focus`)}function m(){o.value=!1,i(`blur`)}function h(e){i(`variable-drop`,e)}function g(){if(!s)return;let e=s.dom;e.style.minHeight=r.multiline?r.density===`compact`?`3rem`:`4rem`:`auto`,e.style.maxHeight=r.multiline?`15rem`:`auto`,e.style.overflowY=r.multiline?`auto`:`hidden`,e.style.whiteSpace=r.multiline?`pre-wrap`:`nowrap`}u(()=>[r.multiline,r.density],()=>{if(!s)return;let e=ra(s.state),t=s.state.selection,n=na(c,e,{multiline:r.multiline,onAutocompleteTrigger:(e,t)=>{i(`autocomplete-trigger`,e,t)},autocompleteTriggerChars:r.autocompleteTriggerChars});try{let{from:e,to:r}=t,i=n.doc.content.size;if(e<=i&&r<=i){let t=Se.create(n.doc,Math.min(e,i),Math.min(r,i)),a=n.apply(n.tr.setSelection(t));l=!0,s.updateState(a),g(),l=!1;return}}catch{}l=!0,s.updateState(n),g(),l=!1},{immediate:!1}),u(()=>r.modelValue,e=>{if(s&&ra(s.state)!==e){l=!0;let t=ia(s.state,c,e||``);s.updateState(t),l=!1}}),ae(()=>{d()}),ne(()=>{f()});function _(){if(!s)return null;let{state:e}=s,{from:t}=e.selection,n=s.coordsAtPos(t);return n?{top:n.top,left:n.left}:null}function v(e,t){if(!s)return;let{state:n,dispatch:r}=s,i=n.tr.insertText(e,t);r(i);let a=t+e.length,o=Se.create(i.doc,a);r(i.setSelection(o).scrollIntoView())}return t({focus:()=>s?.focus(),blur:()=>s?.dom.blur(),getContent:()=>s?ra(s.state):``,setContent:e=>{if(s){let t=ia(s.state,c,e);s.updateState(t)}},getCursorPosition:_,insertTextAtPosition:v}),(e,t)=>(k(),C(`div`,{ref_key:`editorContainer`,ref:a,class:`variable-editor-container`,onFocus:p,onBlur:m},null,544))}}),[[`__scopeId`,`data-v-3f0ad680`]]),oa={class:`flex items-center justify-between border-b border-slate-100 bg-slate-50/90 px-2 py-1.5`},sa={key:0,class:`flex items-center gap-1 text-[10px] text-slate-500`},ca=[`value`],la=[`disabled`],ua=[`disabled`],da={class:`max-h-56 overflow-y-auto variable-scroll px-2 py-2`},fa=[`innerHTML`],pa={key:1,class:`text-xs text-slate-400`},ma={key:0,class:`border-t border-slate-100 bg-slate-50 px-2 py-1.5`},ha=A(O({__name:`PreviewDropdown`,props:{visible:{type:Boolean},items:{},currentIndex:{},positionStyle:{},showTip:{type:Boolean,default:!0}},emits:[`update:currentIndex`],setup(e,{expose:t,emit:n}){let r=e,i=n,a=x(null),o=x(`1`),s=g(()=>r.items.length&&r.items[r.currentIndex]||``),l=g(()=>r.items.length>1&&r.currentIndex>0),d=g(()=>r.items.length>1&&r.currentIndex<r.items.length-1);function f(){r.currentIndex<=0||i(`update:currentIndex`,r.currentIndex-1)}function p(){r.currentIndex>=r.items.length-1||i(`update:currentIndex`,r.currentIndex+1)}function m(e){if(!r.items.length){o.value=`0`;return}o.value=e.target.value.replace(/[^0-9]/g,``)}function y(){if(!r.items.length){o.value=`0`;return}let e=o.value.trim();if(!e){o.value=String(r.currentIndex+1);return}let t=r.items.length,n=Number(e);if(Number.isNaN(n)){o.value=String(r.currentIndex+1);return}let a=Math.min(Math.max(Math.floor(n),1),t);i(`update:currentIndex`,a-1),o.value=String(a)}function S(e){e.key===`Enter`&&(e.preventDefault(),y())}return u(()=>r.currentIndex,e=>{if(!r.items.length){o.value=`0`;return}o.value=String(e+1)},{immediate:!0}),u(()=>r.items,e=>{if(!e.length){o.value=`0`;return}o.value=String(r.currentIndex+1)},{immediate:!0}),t({dropdownRef:a}),(t,n)=>(k(),h(b,{to:`body`},[e.visible?(k(),C(`div`,{key:0,ref_key:`dropdownRef`,ref:a,class:`fixed z-50 overflow-hidden rounded-lg border border-slate-200 bg-white shadow-xl`,style:E(e.positionStyle),onMousedown:n[0]||=F(()=>{},[`prevent`])},[N(`div`,oa,[n[2]||=N(`div`,{class:`text-[10px] font-semibold uppercase tracking-wide text-slate-500`},` Result `,-1),e.items.length>1?(k(),C(`div`,sa,[n[1]||=N(`span`,{class:`font-medium`},`Page`,-1),N(`input`,{value:o.value,type:`text`,inputmode:`numeric`,pattern:`[0-9]*`,placeholder:`0`,class:`h-5 w-7 rounded bg-white px-1 text-center text-[10px] font-medium text-slate-600 shadow-inner ring-1 ring-inset ring-slate-200 transition focus:outline-none focus:ring-2 focus:ring-slate-300`,onInput:m,onBlur:y,onKeydown:S},null,40,ca),N(`span`,null,`/ `+_(e.items.length),1),N(`button`,{type:`button`,class:`flex h-5 w-5 items-center justify-center text-slate-400 transition-colors hover:text-slate-700 disabled:cursor-not-allowed disabled:text-slate-300`,disabled:!l.value,"aria-label":`ä¸Šä¸€é¡µ`,onClick:F(f,[`stop`])},[c(M(Te),{class:`h-3 w-3 -rotate-180`})],8,la),N(`button`,{type:`button`,class:`flex h-5 w-5 items-center justify-center text-slate-400 transition-colors hover:text-slate-700 disabled:cursor-not-allowed disabled:text-slate-300`,disabled:!d.value,"aria-label":`ä¸‹ä¸€é¡µ`,onClick:F(p,[`stop`])},[c(M(Te),{class:`h-3 w-3`})],8,ua)])):T(``,!0)]),N(`div`,da,[s.value?(k(),C(`div`,{key:0,class:`text-xs text-slate-700 whitespace-pre-wrap wrap-break-word`,style:{"font-family":`'Fira Code', 'Courier New', 'Microsoft YaHei', 'SimHei',\r
              monospace`},innerHTML:s.value},null,8,fa)):(k(),C(`p`,pa,[...n[3]||=[N(`span`,{class:`font-mono bg-gray-100`},`[empty]`,-1)]]))]),e.showTip?(k(),C(`div`,ma,[...n[4]||=[N(`p`,{class:`text-[10px] leading-tight text-slate-400`},[v(` Tip: æ”¯æŒæ‹–æ‹½å˜é‡æ’å…¥ï¼Œå˜é‡ä»¥ `),N(`span`,{class:`font-mono text-emerald-600`},`{{ èŠ‚ç‚¹å.å­—æ®µ }}`),v(` å½¢å¼è¡¨ç¤º `)],-1)]])):T(``,!0)],36)):T(``,!0)]))}}),[[`__scopeId`,`data-v-1d70b8f4`]]),ga=[`onClick`,`onMouseenter`],_a={class:`flex items-center gap-2`},va={class:`font-mono text-sm text-emerald-600`},ya={key:0,class:`text-xs text-slate-500`},ba={key:0,class:`text-xs text-slate-400 mt-1`},xa=O({__name:`AutocompleteDropdown`,props:{visible:{type:Boolean},items:{},selectedIndex:{},positionStyle:{}},emits:[`select`,`update:selectedIndex`],setup(e,{expose:t,emit:n}){let r=e,i=n,a=x(null),o=x([]);function s(e,t){o.value[e]=t}function c(e){i(`select`,e)}function l(e){i(`update:selectedIndex`,e)}function d(e){if(!a.value)return;let t=o.value[e];if(!t)return;let n=a.value,r=t.offsetTop,i=r+t.offsetHeight,s=n.scrollTop,c=s+n.clientHeight;r<s?n.scrollTop=r:i>c&&(n.scrollTop=i-n.clientHeight)}return u(()=>r.selectedIndex,e=>{d(e)}),t({listRef:a,itemRefs:o,scrollToSelected:d}),(t,n)=>(k(),h(b,{to:`body`},[e.visible&&e.items.length>0?(k(),C(`div`,{key:0,ref_key:`listRef`,ref:a,class:`fixed z-50 overflow-hidden rounded-lg border border-slate-200 bg-white shadow-xl max-h-64 overflow-y-auto min-w-[200px]`,style:E(e.positionStyle),onMousedown:n[0]||=F(()=>{},[`prevent`])},[(k(!0),C(S,null,P(e.items,(t,n)=>(k(),C(`div`,{key:n,ref_for:!0,ref:e=>s(n,e),class:w([`px-3 py-2 cursor-pointer transition-colors`,n===e.selectedIndex?`bg-slate-100 text-slate-900`:`text-slate-700 hover:bg-slate-50`]),onClick:e=>c(t),onMouseenter:e=>l(n)},[N(`div`,_a,[N(`span`,va,_(t.value),1),t.label===t.value?T(``,!0):(k(),C(`span`,ya,_(t.label),1))]),t.description?(k(),C(`div`,ba,_(t.description),1)):T(``,!0)],42,ga))),128))],36)):T(``,!0)]))}});function Sa(e,t,n,r){let i=x({top:`0px`,left:`0px`,width:`0px`}),a=null,o=null;function s(){if(!e.value||!t.value||!n.value)return;let a=e.value.getBoundingClientRect(),o=r?.offset??4,s=a.bottom+o,c=a.left,l=r?.matchWidth?a.width:void 0;i.value={top:`${s}px`,left:`${c}px`,...l!==void 0&&{width:`${l}px`}}}function c(){n.value&&requestAnimationFrame(()=>{s()})}function l(){a&&=(a.disconnect(),null),e.value&&(a=new ResizeObserver(()=>{n.value&&(o&&clearTimeout(o),o=setTimeout(()=>{requestAnimationFrame(()=>{s()})},16))}),a.observe(e.value))}return u(n,e=>{e&&j(()=>{s(),l()})}),u(e,()=>{j(()=>{l()})}),ae(()=>{j(()=>{l()}),window.addEventListener(`scroll`,c,!0),document.addEventListener(`scroll`,c,!0)}),ie(()=>{a&&=(a.disconnect(),null),o&&=(clearTimeout(o),null),window.removeEventListener(`scroll`,c,!0),document.removeEventListener(`scroll`,c,!0)}),{position:i,updatePosition:s}}function Ca(e,t,n,r,i){let a=x(!1),o=x({top:`0px`,left:`0px`}),s=x(0),c=x(null),l=x([]),d=0,f=`{`,p=!1,m=g(()=>!e.value||e.value.length===0?[]:e.value);function h(){if(!n.value)return;let e=n.value.getCursorPosition();if(!e){a.value=!1;return}o.value={top:`${e.top+20}px`,left:`${e.left}px`}}function _(e,t){c.value=e,l.value=t}function v(){if(!c.value)return;let e=l.value[s.value];if(!e)return;let t=c.value,n=e.offsetTop,r=n+e.offsetHeight,i=t.scrollTop,a=i+t.clientHeight;n<i?t.scrollTop=n:r>a&&(t.scrollTop=r-t.clientHeight)}function y(t,n){!e.value||e.value.length===0||(d=t,f=n,a.value=!0,s.value=0,j(()=>{h()}))}function b(e){i(e,d)}function S(e){if(!a.value||m.value.length===0)return!1;if(e.key===`ArrowDown`)return e.preventDefault(),s.value=Math.min(s.value+1,m.value.length-1),!0;if(e.key===`ArrowUp`)return e.preventDefault(),s.value=Math.max(s.value-1,0),!0;if(e.key===`Enter`||e.key===`Tab`){e.preventDefault();let t=m.value[s.value];return t&&b(t),!0}return e.key===`Escape`?(e.preventDefault(),C(),!0):!1}function C(){a.value=!1}function w(e,n){if(p||!a.value)return;let r=d,i=t.value,o=r<e.length?e[r]:null;if(!o||!i.includes(o)){C();return}let s=e.substring(r+1,r+10);if([`}`,`]`,`)`,`>`].some(e=>s.includes(e))){C();return}if(e.length<n.length){let t=e.substring(Math.max(0,r-1),Math.min(e.length,r+2));i.some(e=>t.includes(e))||C()}}return u(a,e=>{e&&j(()=>{h()})}),u(r,(e,t)=>{w(e,t)}),ae(()=>{document.addEventListener(`keydown`,S,!0)}),ie(()=>{document.removeEventListener(`keydown`,S,!0)}),{isVisible:a,position:o,selectedIndex:s,filteredVariables:m,listRef:c,itemRefs:l,triggerPosition:()=>d,triggerChar:()=>f,setIsSelecting:e=>{p=e},setRefs:_,handleTrigger:y,selectVariable:b,close:C,updatePosition:h,scrollToSelectedItem:v}}var wa={key:0,class:`p-3 bg-white/90 border border-slate-200 rounded-md shadow-sm`},Ta=[`innerHTML`],Ea={key:1,class:`relative`},Da={key:0,class:`pointer-events-none flex items-center justify-center w-7 text-gray-600 rounded-l-md shrink-0 border-r border-gray-200`,style:{"background-color":`#f1f3f9`}},Oa={class:`relative flex-1 min-w-0`},ka={class:`absolute right-0 bottom-0 w-5 h-8 pt-3 hidden`},Aa={key:0,class:`pointer-events-none items-center justify-center w-7 text-gray-600 rounded-l-md shrink-0 border-r border-gray-200`,style:{"background-color":`#f1f3f9`}},ja={class:`relative flex-1 min-w-0`},Ma={class:`absolute right-0 bottom-0 w-5 h-8 pt-3 hidden`},Na={key:3,class:`p-3 bg-white/90 border border-slate-200 rounded-md shadow-sm`},Pa=[`innerHTML`],Fa={key:4,class:`text-[10px] leading-tight text-slate-400 px-1`},Ia=A(O({inheritAttrs:!1,__name:`VariableTextInput`,props:{modelValue:{default:``},placeholder:{default:``},rows:{default:1},multiline:{type:Boolean,default:!1},previewMode:{default:`bottom`},density:{default:`default`},showBorder:{type:Boolean,default:!1},showTip:{type:Boolean,default:!0},showLeftIcon:{type:Boolean,default:!0},resolveVariable:{type:Function,default:void 0},availableVariables:{default:()=>[]},autocompleteTriggerChars:{default:()=>[`{`,`[`]}},emits:[`update:modelValue`,`open-variable-editor`],setup(e,{emit:t}){let n=e,r=t,i=x(null),a=x(null),o=x(null),s=x(null),l=x(re(n.modelValue)),d=x(!1),f=x(0),p=x(!1),m=null,h=x(null);u(()=>s.value?.dropdownRef,e=>{h.value=e||null},{immediate:!0});let{position:y}=Sa(a,h,d,{offset:4,matchWidth:!0}),b=Ca(g(()=>n.availableVariables||[]),g(()=>n.autocompleteTriggerChars||[`{`,`[`]),i,l,fe),S=g(()=>!l.value&&n.placeholder);u(()=>n.modelValue,e=>{let t=re(e);t!==l.value&&(l.value=t)}),u(d,e=>{!e&&n.previewMode===`dropdown`&&(p.value=!1)});let E=g(()=>{let e=l.value;return!e||typeof e!=`string`?!1:/\{\{\s*[^{}]+?\s*\}\}/.test(e)}),ee=g(()=>{let e=l.value;if(!e)return[];if(!E.value||!n.resolveVariable)return[A(oe(e))];try{let t=n.resolveVariable(e);return Array.isArray(t)?t.map(()=>O(e)):[O(e)]}catch(e){return[`è§£æžé”™è¯¯: ${e}`]}}),D=g(()=>{let e=l.value;if(!e)return``;if(!E.value||!n.resolveVariable)return A(String(e));try{return O(e)}catch(e){return`è§£æžé”™è¯¯: ${e}`}});function ne(e){let t=[{bg:`#ecfdf5`,text:`#10b981`},{bg:`#eff6ff`,text:`#3b82f6`},{bg:`#fef3c7`,text:`#f59e0b`},{bg:`#fce7f3`,text:`#ec4899`},{bg:`#e0e7ff`,text:`#6366f1`},{bg:`#d1fae5`,text:`#059669`},{bg:`#dbeafe`,text:`#2563eb`},{bg:`#fde68a`,text:`#d97706`},{bg:`#fbcfe8`,text:`#db2777`},{bg:`#c7d2fe`,text:`#4f46e5`},{bg:`#a7f3d0`,text:`#047857`},{bg:`#bfdbfe`,text:`#1d4ed8`}],n=0;for(let t=0;t<e.length;t++)n=e.charCodeAt(t)+((n<<5)-n);return t[Math.abs(n)%t.length]}function O(e){if(!n.resolveVariable)return A(e);let t=/\{\{([^}]+)\}\}/g,r=[],i;for(;(i=t.exec(e))!==null;)i[1]&&r.push({match:i[0],index:i.index,varName:i[1].trim()});if(r.length===0)return A(e);let a=``,o=0;for(let t of r){a+=A(e.substring(o,t.index));try{if(!n.resolveVariable){a+=A(t.match),o=t.index+t.match.length;continue}let e=n.resolveVariable(t.match),r=oe(Array.isArray(e)?e[0]:e);if(r){let e=ne(t.varName);a+=`<span style="background-color: ${e.bg}; border-radius: 3px; color: ${e.text};">${A(String(r))}</span>`}else a+=A(t.match)}catch{a+=A(t.match)}o=t.index+t.match.length}return a+=A(e.substring(o)),a}function A(e){let t=document.createElement(`div`);return t.textContent=e,t.innerHTML}u(ee,e=>{if(!e.length){f.value=0;return}f.value>e.length-1&&(f.value=e.length-1)},{immediate:!0});function re(e){return e==null?``:String(e)}function oe(e){if(e==null)return``;if(typeof e==`object`)try{return JSON.stringify(e,null,2)}catch{return String(e)}return String(e)}function se(){p.value=!0,m&&=(clearTimeout(m),null),n.previewMode===`dropdown`&&(f.value=0,d.value=!0)}function ce(){m=window.setTimeout(()=>{p.value=!1,n.previewMode===`dropdown`&&(d.value=!1),b.close(),m=null},200)}function P(e){let t=e.target,r=a.value;if(n.previewMode===`dropdown`&&d.value){if(r&&r.contains(t)||h.value&&h.value.contains(t))return;p.value=!1,d.value=!1}if(b.isVisible.value){if(r&&r.contains(t)||o.value?.listRef&&o.value.listRef.contains(t))return;b.close()}}function le(e){l.value=e,r(`update:modelValue`,e)}function ue(e){let t=e.detail;if(!t?.reference)return;let n=t.reference.trim();n&&le(t.isReplace?n:l.value+n)}function de(e,t){b.handleTrigger(e,t),j(()=>{o.value&&(b.setRefs(o.value.listRef,o.value.itemRefs),o.value.scrollToSelected(b.selectedIndex.value))})}function fe(e,t){if(!i.value)return;let r=e.value,a=l.value,o=t,s=n.autocompleteTriggerChars||[`{`,`[`],c=o<a.length?a[o]:null;if(o>=a.length||!c||!s.includes(c)){let e=-1;for(let t of s){let n=a.lastIndexOf(t,o+2);n>e&&(e=n)}if(e===-1){b.close();return}o=e}let u=0,d=o,f=a[o];for(;d<a.length&&a[d]===f;)u++,d++;let p=o+Math.min(u,2),m=2,h=p;for(;h<a.length;){let e=a[h];if(e===`}`||e===`]`){if(m--,h++,m<=0)break}else break}m=Math.max(m,2),b.setIsSelecting(!0),b.close();let g=Math.min(u,2),_=`{{`+r+`}`.repeat(m);if(i.value&&i.value.getContent&&i.value.setContent){let e=i.value.getContent(),t=e.substring(0,o),n=e.substring(o+g),r=t+_+n;i.value.setContent(r);let a=o+_.length;j(()=>{i.value&&i.value.insertTextAtPosition(``,a)})}else i.value.insertTextAtPosition(_,o);j(()=>{setTimeout(()=>{b.setIsSelecting(!1)},100)})}function pe(e){fe(e,b.triggerPosition())}function me(){r(`open-variable-editor`,l.value,e=>{le(e)})}return ae(()=>{n.previewMode===`dropdown`&&document.addEventListener(`mousedown`,P,!0)}),u(()=>n.previewMode,(e,t)=>{e===`dropdown`&&t!==`dropdown`?document.addEventListener(`mousedown`,P,!0):e!==`dropdown`&&t===`dropdown`&&document.removeEventListener(`mousedown`,P,!0)}),ie(()=>{m&&=(clearTimeout(m),null),document.removeEventListener(`mousedown`,P,!0)}),(t,n)=>(k(),C(`div`,te(t.$attrs,{class:`space-y-2`}),[e.previewMode===`top`&&p.value&&D.value?(k(),C(`div`,wa,[n[2]||=N(`div`,{class:`flex items-center justify-between mb-2`},[N(`span`,{class:`text-[10px] font-semibold tracking-wide text-slate-500`},`å®žæ—¶é¢„è§ˆ`)],-1),N(`div`,{class:`text-xs text-slate-700 whitespace-pre-wrap wrap-break-word max-h-32 overflow-y-auto variable-scroll`,style:{"font-family":`'Fira Code', 'Courier New', 'Microsoft YaHei', 'SimHei', monospace`},innerHTML:D.value},null,8,Ta)])):T(``,!0),e.previewMode===`dropdown`?(k(),C(`div`,Ea,[N(`div`,{ref_key:`triggerContainerRef`,ref:a,class:w([`variable-text-input`,`relative flex items-stretch h-full rounded-md border transition-all duration-200`,e.showBorder?`border-dashed border-red-600`:p.value?`border-slate-400 ring-2 ring-slate-200`:`border-slate-200`])},[e.showLeftIcon?(k(),C(`div`,Da,[c(M(Ne),{class:`w-4 h-4`})])):T(``,!0),N(`div`,Oa,[S.value?(k(),C(`span`,{key:0,class:w([`pointer-events-none absolute select-none text-slate-400 z-10`,e.density===`compact`?`left-2 top-1 text-xs`:`left-2 top-2 text-sm`])},_(e.placeholder),3)):T(``,!0),c(aa,{ref_key:`editorRef`,ref:i,"model-value":l.value,multiline:e.multiline,density:e.density,"autocomplete-trigger-chars":e.autocompleteTriggerChars,class:`w-full`,"onUpdate:modelValue":le,onFocus:se,onBlur:ce,onVariableDrop:ue,onAutocompleteTrigger:de},null,8,[`model-value`,`multiline`,`density`,`autocomplete-trigger-chars`])]),N(`div`,ka,[N(`button`,{type:`button`,class:`flex items-center justify-center w-full h-full border-l rounded-tl-md border-t border-slate-200 bg-white text-slate-500 transition-colors hover:border-slate-300 hover:text-slate-700 hover:bg-slate-100 rounded-r-md shrink-0`,onClick:F(me,[`stop`]),title:`æ‰“å¼€å˜é‡ç¼–è¾‘å™¨`},[c(M(We),{class:`h-3 w-3`})])])],2),c(ha,{ref_key:`previewDropdownRef`,ref:s,visible:d.value,items:ee.value,"current-index":f.value,"position-style":M(y),"show-tip":e.showTip,"onUpdate:currentIndex":n[0]||=e=>f.value=e},null,8,[`visible`,`items`,`current-index`,`position-style`,`show-tip`])])):(k(),C(`div`,{key:2,class:w([`variable-text-input`,`relative flex items-stretch h-full rounded-md border transition-all duration-200`,e.showBorder?`border-dashed border-red-600`:p.value?`border-slate-400 ring-2 ring-slate-200`:`border-slate-200`])},[e.showLeftIcon?(k(),C(`div`,Aa,[c(M(Ne),{class:`w-4 h-4`})])):T(``,!0),N(`div`,ja,[S.value?(k(),C(`span`,{key:0,class:w([`pointer-events-none absolute select-none text-slate-400 z-10`,e.density===`compact`?`left-2 top-1 text-xs`:`left-2 top-2 text-sm`])},_(e.placeholder),3)):T(``,!0),c(aa,{ref_key:`editorRef`,ref:i,"model-value":l.value,multiline:e.multiline,density:e.density,"autocomplete-trigger-chars":e.autocompleteTriggerChars,class:`w-full`,"onUpdate:modelValue":le,onFocus:se,onBlur:ce,onVariableDrop:ue,onAutocompleteTrigger:de},null,8,[`model-value`,`multiline`,`density`,`autocomplete-trigger-chars`])]),N(`div`,Ma,[N(`button`,{type:`button`,class:`flex items-center justify-center w-full h-full border-l rounded-tl-md border-t border-slate-200 bg-white text-slate-500 transition-colors hover:border-slate-300 hover:text-slate-700 hover:bg-slate-100 rounded-r-md shrink-0`,onClick:F(me,[`stop`]),title:`æ‰“å¼€å˜é‡ç¼–è¾‘å™¨`},[c(M(We),{class:`h-3 w-3`})])])],2)),e.previewMode===`bottom`&&p.value&&D.value?(k(),C(`div`,Na,[n[3]||=N(`div`,{class:`flex items-center justify-between mb-2`},[N(`span`,{class:`text-[10px] font-semibold tracking-wide text-slate-500`},`å®žæ—¶é¢„è§ˆ`)],-1),N(`div`,{class:`text-xs text-slate-700 whitespace-pre-wrap wrap-break-word max-h-32 overflow-y-auto variable-scroll`,style:{"font-family":`'Fira Code', 'Courier New', 'Microsoft YaHei', 'SimHei', monospace`},innerHTML:D.value},null,8,Pa)])):T(``,!0),e.previewMode!==`dropdown`&&p.value&&e.showTip?(k(),C(`p`,Fa,[...n[4]||=[v(` Tip: æ”¯æŒæ‹–æ‹½å˜é‡æ’å…¥ï¼Œå˜é‡ä»¥ `,-1),N(`span`,{class:`font-mono text-emerald-600`},`{{ èŠ‚ç‚¹å.å­—æ®µ }}`,-1),v(` å½¢å¼è¡¨ç¤º `,-1)]])):T(``,!0),c(xa,{ref_key:`autocompleteDropdownRef`,ref:o,visible:M(b).isVisible.value,items:M(b).filteredVariables.value,"selected-index":M(b).selectedIndex.value,"position-style":M(b).position.value,onSelect:pe,"onUpdate:selectedIndex":n[1]||=e=>M(b).selectedIndex.value=e},null,8,[`visible`,`items`,`selected-index`,`position-style`])],16))}}),[[`__scopeId`,`data-v-c0aaba0c`]]),La={key:0,class:`h-full flex-1 flex flex-col gap-2`},Ra={class:`flex-1 flex flex-col gap-5 overflow-y-auto p-5`},za={class:`space-y-2`},Ba={class:`space-y-2`},Va={class:`space-y-2`},Ha={class:`space-y-2`},Ua={class:`space-y-2`},Wa={class:`grid grid-cols-3 gap-2`},Ga={key:1,class:`space-y-2`},Ka=[`value`],qa={key:2,class:`space-y-4`},Ja={class:`space-y-2`},Ya={class:`space-y-2`},Xa={class:`space-y-2`},Za=[`value`],Qa={class:`space-y-2`},$a={class:`space-y-2`},eo={class:`space-y-2`},to=[`value`],no={class:`p-5 pt-0`},ro={key:1,class:`flex flex-col items-center justify-center h-full min-h-[200px] text-center px-4`},io=O({__name:`ModuleProperties`,props:{selectedModule:{},selectedModuleIndex:{},currentStyle:{},previewVariables:{}},emits:[`update-module`,`delete-module`],setup(e,{emit:t}){let n=e,r=t,a=g(()=>{let e=n.selectedModule?.style;if(!e)return[];if(Array.isArray(e))return e;if(typeof e==`string`)try{let t=JSON.parse(e);return Array.isArray(t)?t:[t]}catch{return[e]}return[]}),o={bold:[`dim`],dim:[`bold`]},s=[`normal`,`noUnderline`,`noReverse`],u=g({get:()=>n.selectedModule?.text||``,set:e=>{r(`update-module`,`text`,e)}}),d=g(()=>e=>{if(!n.previewVariables)return e;let t={};return Object.keys(n.previewVariables).forEach(e=>{t[e]=n.previewVariables[e]||``}),Ze(e,t)}),f=g(()=>{if(!n.previewVariables)return[];let e={workDirName:`å·¥ä½œç›®å½•å`,gitBranch:`Git åˆ†æ”¯`,model:`æ¨¡åž‹åç§°`,inputTokens:`è¾“å…¥ Tokens`,outputTokens:`è¾“å‡º Tokens`,totalInputTokens:`æ€»è¾“å…¥ Tokens`,totalOutputTokens:`æ€»è¾“å‡º Tokens`,contextWindowSize:`ä¸Šä¸‹æ–‡çª—å£å¤§å°`,totalCost:`æ€»æˆæœ¬ (USD)`,totalDuration:`æ€»è€—æ—¶`,totalApiDuration:`API æ€»è€—æ—¶`,totalLinesAdded:`æ€»æ–°å¢žè¡Œæ•°`,totalLinesRemoved:`æ€»åˆ é™¤è¡Œæ•°`};return Object.keys(n.previewVariables).map(t=>({label:e[t]||t,value:t,description:`å½“å‰å€¼: ${n.previewVariables[t]||``}`}))});function p(e){let t=a.value,n=t.includes(e),i;if(n)i=t.filter(t=>t!==e);else{let n=o[e]||[];i=[...t.filter(e=>!n.includes(e)),e]}i=i.filter(e=>!s.includes(e)),r(`update-module`,`style`,i.length>0?JSON.stringify(i):``)}return(e,t)=>n.selectedModule&&n.selectedModuleIndex!==null?(k(),C(`div`,La,[N(`div`,Ra,[n.selectedModule.type===`progress`?T(``,!0):(k(),C(S,{key:0},[N(`div`,za,[t[12]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`å›¾æ ‡`,-1),c(Pi,{"model-value":n.selectedModule.icon||``,"onUpdate:modelValue":t[0]||=e=>r(`update-module`,`icon`,e)},null,8,[`model-value`])]),N(`div`,Ba,[t[13]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`æ–‡æœ¬`,-1),c(Ia,{modelValue:u.value,"onUpdate:modelValue":t[1]||=e=>u.value=e,placeholder:`ä¾‹å¦‚: {{workDirName}}`,"preview-mode":`dropdown`,"show-tip":!0,"show-left-icon":!1,multiline:!0,"resolve-variable":d.value,"available-variables":f.value,"autocomplete-trigger-chars":[`{`,`[`]},null,8,[`modelValue`,`resolve-variable`,`available-variables`])]),N(`div`,Va,[t[14]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`æ–‡å­—é¢œè‰²`,-1),c(Gi,{"model-value":n.selectedModule.color||null,placeholder:`é€‰æ‹©æ–‡å­—é¢œè‰²`,"onUpdate:modelValue":t[2]||=e=>{r(`update-module`,`color`,e||``)}},null,8,[`model-value`])]),N(`div`,Ha,[t[15]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`èƒŒæ™¯é¢œè‰²`,-1),c(Gi,{"model-value":n.selectedModule.background||null,placeholder:`é€‰æ‹©èƒŒæ™¯é¢œè‰²`,"onUpdate:modelValue":t[3]||=e=>{r(`update-module`,`background`,e||``)}},null,8,[`model-value`])]),N(`div`,Ua,[t[20]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`æ–‡æœ¬æ ·å¼`,-1),N(`div`,Wa,[c(Yi,{value:`bold`,label:`ç²—ä½“`,description:`åŠ ç²—æ–‡æœ¬`,"is-selected":a.value.includes(`bold`),onClick:p},{icon:l(()=>[...t[16]||=[N(`svg`,{class:`w-4 h-4 shrink-0`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[N(`path`,{d:`M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z`}),N(`path`,{d:`M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z`})],-1)]]),_:1},8,[`is-selected`]),c(Yi,{value:`dim`,label:`æš—æ·¡`,description:`å¼±åŒ–æ–‡æœ¬`,"is-selected":a.value.includes(`dim`),onClick:p},{icon:l(()=>[...t[17]||=[N(`svg`,{class:`w-4 h-4 opacity-60 shrink-0`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[N(`path`,{d:`M4 12h16`}),N(`path`,{d:`M4 16h12`}),N(`path`,{d:`M4 8h14`})],-1)]]),_:1},8,[`is-selected`]),c(Yi,{value:`underline`,label:`ä¸‹åˆ’çº¿`,description:`æ·»åŠ ä¸‹åˆ’çº¿`,"is-selected":a.value.includes(`underline`),onClick:p},{icon:l(()=>[...t[18]||=[N(`svg`,{class:`w-4 h-4 shrink-0`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[N(`path`,{d:`M6 4v6a6 6 0 0 0 12 0V4`}),N(`path`,{d:`M4 20h16`})],-1)]]),_:1},8,[`is-selected`]),c(Yi,{value:`reverse`,label:`åè‰²`,description:`å‰æ™¯è‰²å’ŒèƒŒæ™¯è‰²äº’æ¢`,"is-selected":a.value.includes(`reverse`),onClick:p},{icon:l(()=>[...t[19]||=[N(`svg`,{class:`w-4 h-4 shrink-0`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[N(`rect`,{x:`2`,y:`3`,width:`20`,height:`14`,rx:`2`}),N(`path`,{d:`M8 21h8`}),N(`path`,{d:`M12 17v4`}),N(`path`,{d:`M7 8l5-5 5 5`})],-1)]]),_:1},8,[`is-selected`])]),t[21]||=N(`p`,{class:`text-xs text-slate-500 mt-1`},`å¯å¤šé€‰ï¼Œæ”¯æŒç»„åˆæ ·å¼æ•ˆæžœ`,-1)])],64)),n.selectedModule.type===`script`?(k(),C(`div`,Ga,[t[22]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`è„šæœ¬è·¯å¾„`,-1),N(`input`,{value:n.selectedModule.scriptPath||``,class:`input-base`,placeholder:`/path/to/script.js`,onInput:t[4]||=e=>r(`update-module`,`scriptPath`,e.target.value)},null,40,Ka)])):T(``,!0),n.selectedModule.type===`progress`?(k(),C(`div`,qa,[N(`div`,Ja,[t[23]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`è¾“å…¥å˜é‡`,-1),c(Ia,{"model-value":n.selectedModule.progressInput||``,placeholder:`ä¾‹å¦‚: {{totalInputTokens}}`,"preview-mode":`dropdown`,"show-tip":!0,"show-left-icon":!1,multiline:!1,"resolve-variable":d.value,"available-variables":f.value,"autocomplete-trigger-chars":[`{`,`[`],"onUpdate:modelValue":t[5]||=e=>r(`update-module`,`progressInput`,e)},null,8,[`model-value`,`resolve-variable`,`available-variables`]),t[24]||=N(`p`,{class:`text-xs text-slate-500`},`å½“å‰è¿›åº¦å€¼ï¼ˆå¦‚ï¼š2.11kï¼‰`,-1)]),N(`div`,Ya,[t[25]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`è¾“å‡ºå˜é‡`,-1),c(Ia,{"model-value":n.selectedModule.progressOutput||``,placeholder:`ä¾‹å¦‚: {{contextWindowSize}}`,"preview-mode":`dropdown`,"show-tip":!0,"show-left-icon":!1,multiline:!1,"resolve-variable":d.value,"available-variables":f.value,"autocomplete-trigger-chars":[`{`,`[`],"onUpdate:modelValue":t[6]||=e=>r(`update-module`,`progressOutput`,e)},null,8,[`model-value`,`resolve-variable`,`available-variables`]),t[26]||=N(`p`,{class:`text-xs text-slate-500`},`æœ€å¤§å€¼ï¼ˆå¦‚ï¼š200kï¼‰`,-1)]),N(`div`,Xa,[t[27]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`è¿›åº¦æ¡é•¿åº¦`,-1),N(`input`,{type:`number`,value:n.selectedModule.progressLength||20,class:`input-base`,placeholder:`20`,min:`1`,max:`100`,onInput:t[7]||=e=>r(`update-module`,`progressLength`,e.target.value)},null,40,Za),t[28]||=N(`p`,{class:`text-xs text-slate-500`},`è¿›åº¦æ¡çš„å­—ç¬¦é•¿åº¦ï¼ˆ1-100ï¼‰`,-1)]),N(`div`,Qa,[t[29]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`è¿›åº¦æ¡èƒŒæ™¯é¢œè‰²`,-1),c(Gi,{"model-value":n.selectedModule.progressBgColor||null,placeholder:`é€‰æ‹©èƒŒæ™¯é¢œè‰²`,"onUpdate:modelValue":t[8]||=e=>{r(`update-module`,`progressBgColor`,e||``)}},null,8,[`model-value`])]),N(`div`,$a,[t[30]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`è¿›åº¦æ¡é¢œè‰²`,-1),c(Gi,{"model-value":n.selectedModule.progressColor||null,placeholder:`é€‰æ‹©è¿›åº¦æ¡é¢œè‰²`,"onUpdate:modelValue":t[9]||=e=>{r(`update-module`,`progressColor`,e||``)}},null,8,[`model-value`])]),N(`div`,eo,[t[32]||=N(`label`,{class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},`è¿›åº¦æ¡æ ·å¼`,-1),N(`select`,{value:n.selectedModule.progressStyle||`block`,class:`input-base`,onChange:t[10]||=e=>r(`update-module`,`progressStyle`,e.target.value)},[...t[31]||=[ee(`<option value="block">å®žå¿ƒå— (â–ˆ)</option><option value="thin">ç»†å— (â–â–Žâ–â–Œâ–‹â–Šâ–‰)</option><option value="smooth">å¹³æ»‘ (â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆ)</option><option value="bar">æ¡å½¢ (=)</option><option value="dot">ç‚¹çŠ¶ (â—)</option>`,5)]],40,to),t[33]||=N(`p`,{class:`text-xs text-slate-500`},`é€‰æ‹©è¿›åº¦æ¡çš„æ˜¾ç¤ºé£Žæ ¼`,-1)])])):T(``,!0)]),N(`div`,no,[N(`button`,{class:`btn-secondary w-full text-red-600! hover:bg-red-50! hover:border-red-300! hover:shadow-sm transition-all mt-auto shrink-0`,onClick:t[11]||=e=>r(`delete-module`)},[c(M(i),{class:`w-4 h-4`}),t[34]||=v(` åˆ é™¤æ¨¡å— `,-1)])])])):(k(),C(`div`,ro,[...t[35]||=[ee(`<div class="w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mb-4"><svg class="w-8 h-8 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></div><p class="text-slate-500 text-sm font-medium mb-1">é€‰æ‹©æ¨¡å—ä»¥ç¼–è¾‘å±žæ€§</p><p class="text-slate-400 text-xs">åœ¨é¢„è§ˆåŒºåŸŸç‚¹å‡»ä»»æ„æ¨¡å—å¼€å§‹ç¼–è¾‘</p>`,3)]]))}}),ao={class:`space-y-4 p-5`},oo={class:`text-xs font-bold text-slate-500 uppercase tracking-wider`},so={class:`text-xs font-semibold text-slate-700 uppercase tracking-wider`},co={class:`ml-1 text-slate-400 font-mono normal-case`},lo=O({__name:`PreviewVariablesForm`,props:{previewVariables:{}},emits:[`update`],setup(e,{emit:t}){let n=e,r=t,i=[{key:`workDirName`,label:`å·¥ä½œç›®å½•`,group:`åŸºç¡€ä¿¡æ¯`},{key:`gitBranch`,label:`Gitåˆ†æ”¯`,group:`åŸºç¡€ä¿¡æ¯`},{key:`model`,label:`æ¨¡åž‹`,group:`åŸºç¡€ä¿¡æ¯`},{key:`inputTokens`,label:`è¾“å…¥Token`,group:`Token ä¿¡æ¯`},{key:`outputTokens`,label:`è¾“å‡ºToken`,group:`Token ä¿¡æ¯`},{key:`totalInputTokens`,label:`æ€»è¾“å…¥Token`,group:`Token ä¿¡æ¯`},{key:`totalOutputTokens`,label:`æ€»è¾“å‡ºToken`,group:`Token ä¿¡æ¯`},{key:`contextWindowSize`,label:`ä¸Šä¸‹æ–‡çª—å£å¤§å°`,group:`Token ä¿¡æ¯`},{key:`totalCost`,label:`æ€»æˆæœ¬`,group:`æˆæœ¬ä¿¡æ¯`},{key:`totalDuration`,label:`æ€»è€—æ—¶`,group:`æˆæœ¬ä¿¡æ¯`},{key:`totalApiDuration`,label:`APIæ€»è€—æ—¶`,group:`æˆæœ¬ä¿¡æ¯`},{key:`totalLinesAdded`,label:`æ€»æ–°å¢žè¡Œæ•°`,group:`ä»£ç ç»Ÿè®¡`},{key:`totalLinesRemoved`,label:`æ€»åˆ é™¤è¡Œæ•°`,group:`ä»£ç ç»Ÿè®¡`}],a=g(()=>{let e=new Map;return i.forEach(t=>{e.has(t.group)||e.set(t.group,[]),e.get(t.group).push(t)}),Array.from(e.entries())});return(e,t)=>(k(),C(`div`,ao,[(k(!0),C(S,null,P(a.value,([e,t])=>(k(),C(`div`,{key:e,class:`space-y-3`},[N(`h3`,oo,_(e),1),(k(!0),C(S,null,P(t,e=>(k(),C(`div`,{key:e.key,class:`flex flex-col gap-2`},[N(`label`,so,[v(_(e.label)+` `,1),N(`span`,co,`(`+_(e.key)+`)`,1)]),c(Pe,{"model-value":n.previewVariables[e.key]||``,"onUpdate:modelValue":t=>r(`update`,e.key,t)},null,8,[`model-value`,`onUpdate:modelValue`])]))),128))]))),128))]))}}),uo={class:`max-w-7xl mx-auto h-full overflow-hidden flex flex-col bg-slate-50/50`},fo={class:`flex justify-between items-center p-6 pb-4 border-b shrink-0`},po={class:`flex items-center gap-4`},mo=[`disabled`],ho=[`disabled`],go={key:0,class:`flex-1 flex items-center justify-center bg-white/50`},_o={key:1,class:`flex-1 overflow-hidden flex flex-col gap-4 p-6`},vo={class:`grid grid-cols-3 gap-2 flex-1 overflow-hidden min-h-0`},yo={class:`flex flex-col gap-4 col-span-2 overflow-y-auto min-h-0 pr-2`},bo={class:`flex flex-col gap-4`},xo={class:`min-h-[200px] shrink-0`},So={class:`min-h-[200px] shrink-0`},Co={class:`bg-white border border-slate-200 rounded-xl flex flex-col overflow-hidden col-span-1 shadow-sm hover:shadow-md transition-shadow`},wo={class:`flex border-b border-slate-100 bg-slate-50/50`},To={key:0,class:`absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600 rounded-full`},Eo={key:0,class:`absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600 rounded-full`},Do={class:`overflow-y-auto flex-1 flex flex-col h-full`},Oo=O({__name:`StatusLinePanel`,setup(e){let n=x({workDirName:`project`,gitBranch:`main`,model:`Claude Sonnet 4`,inputTokens:`1.2k`,outputTokens:`2.5k`,totalInputTokens:`10.5k`,totalOutputTokens:`25.3k`,contextWindowSize:`200k`,totalCost:`$0.15`,totalDuration:`2.5s`,totalApiDuration:`1.8s`,totalLinesAdded:`150`,totalLinesRemoved:`45`});function r(e,t){n.value={...n.value,[e]:t}}let{statusLineConfig:i,selectedModuleIndex:a,selectedModule:o,autoSeparator:s,showIcon:l,isLoading:u,isSaving:d,hasUnsavedChanges:f,draggableModules:p,themeNames:m,handleSave:g,refreshConfig:y,handleAddModule:b,handleModuleChange:S,handleDeleteModule:E,toggleAutoSeparator:ee,toggleShowIcon:D,renderModulePreview:te,loadConfig:ne,handleEnabledChange:O,addThemeTemplate:A,deleteThemeTemplate:re,duplicateThemeTemplate:j,renameThemeTemplate:ie,switchThemeTemplate:oe}=et(n);Ge(p,{enableKeyboardShortcuts:!0,debounceMs:120,capacity:80,debug:!1});let se=x(`properties`);return ge(window,`keydown`,e=>{let t=e.target;t.tagName===`INPUT`||t.tagName===`TEXTAREA`||t.isContentEditable||t.closest(`input`)||t.closest(`textarea`)||t.closest(`[contenteditable]`)||a.value!==null&&(e.key===`Delete`||e.key===`Backspace`)&&(e.preventDefault(),E())}),ae(()=>{ne()}),(e,x)=>(k(),C(`div`,uo,[N(`div`,fo,[x[14]||=N(`div`,null,[N(`h2`,{class:`text-2xl font-bold text-slate-800`},`StatusLine é…ç½®`),N(`p`,{class:`text-slate-500 text-sm mt-1`},`å¯è§†åŒ–ç¼–è¾‘ StatusLine çŠ¶æ€æ é…ç½®`)],-1),N(`div`,po,[N(`button`,{class:`px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 hover:border-slate-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,disabled:M(u)||M(d),onClick:x[0]||=(...e)=>M(y)&&M(y)(...e)},[c(M(Le),{class:`w-4 h-4 inline-block mr-2`}),x[13]||=v(` åˆ·æ–°é…ç½® `,-1)],8,mo),N(`button`,{class:w([`btn-primary shadow-lg transition-all duration-200`,M(f)?`shadow-amber-500/30 bg-amber-600 hover:bg-amber-700 ring-2 ring-amber-400 ring-offset-2`:`shadow-primary-500/20`]),disabled:M(d),onClick:x[1]||=(...e)=>M(g)&&M(g)(...e)},[c(M(t),{class:`w-4 h-4`}),v(` `+_(M(d)?`ä¿å­˜ä¸­...`:M(f)?`ä¿å­˜é…ç½® *`:`ä¿å­˜é…ç½®`),1)],10,ho)])]),M(u)?(k(),C(`div`,go,[...x[15]||=[N(`div`,{class:`flex flex-col items-center gap-3`},[N(`div`,{class:`w-8 h-8 border-4 border-indigo-500/20 border-t-indigo-600 rounded-full animate-spin`}),N(`div`,{class:`text-slate-500 text-sm font-medium`},`åŠ è½½ä¸­...`)],-1)]])):(k(),C(`div`,_o,[N(`div`,vo,[N(`div`,yo,[c(ft,{"current-style":M(i).currentStyle,"theme-names":M(m),"auto-separator":M(s),"show-icon":M(l),enabled:M(i).enabled,"onUpdate:style":x[2]||=e=>M(oe)(e),onToggleAutoSeparator:M(ee),onToggleShowIcon:M(D),"onUpdate:enabled":x[3]||=e=>M(O)(e),onAddTheme:x[4]||=e=>M(A)(e),onDeleteTheme:x[5]||=e=>M(re)(e),onDuplicateTheme:x[6]||=e=>M(j)(e),onRenameTheme:x[7]||=(e,t)=>M(ie)(e,t)},null,8,[`current-style`,`theme-names`,`auto-separator`,`show-icon`,`enabled`,`onToggleAutoSeparator`,`onToggleShowIcon`]),N(`div`,bo,[N(`div`,xo,[c(yi,{modules:M(p),"current-style":M(i).currentStyle,"selected-index":M(a),"show-icon":M(l),"render-module-preview":M(te),"onUpdate:selected":x[8]||=e=>a.value=e,"onUpdate:modules":x[9]||=e=>p.value=e,onReorder:()=>{}},null,8,[`modules`,`current-style`,`selected-index`,`show-icon`,`render-module-preview`])]),N(`div`,So,[c(Ei,{onAdd:M(b)},null,8,[`onAdd`])])])]),N(`div`,Co,[N(`div`,wo,[N(`button`,{class:w([`flex-1 px-4 pt-4 pb-2 text-sm font-semibold relative transition-colors`,se.value===`properties`?`text-indigo-600 bg-white`:`text-slate-600 hover:text-slate-900 hover:bg-white/50`]),onClick:x[10]||=e=>se.value=`properties`},[x[16]||=v(` å±žæ€§é…ç½® `,-1),se.value===`properties`?(k(),C(`span`,To)):T(``,!0)],2),N(`button`,{class:w([`flex-1 px-4 pt-4 pb-2 text-sm font-semibold relative transition-colors`,se.value===`preview`?`text-indigo-600 bg-white`:`text-slate-600 hover:text-slate-900 hover:bg-white/50`]),onClick:x[11]||=e=>se.value=`preview`},[x[17]||=v(` é¢„è§ˆæ•°æ® `,-1),se.value===`preview`?(k(),C(`span`,Eo)):T(``,!0)],2)]),N(`div`,Do,[se.value===`properties`?(k(),h(io,{key:0,"selected-module":M(o),"selected-module-index":M(a),"current-style":M(i).currentStyle,"preview-variables":n.value,onUpdateModule:M(S),onDeleteModule:M(E)},null,8,[`selected-module`,`selected-module-index`,`current-style`,`preview-variables`,`onUpdateModule`,`onDeleteModule`])):(k(),h(lo,{key:1,"preview-variables":n.value,onUpdate:x[12]||=(e,t)=>r(e,t)},null,8,[`preview-variables`]))])])])]))]))}});export{Oo as default};